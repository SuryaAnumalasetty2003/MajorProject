Ö
DC:\ParkingLotAllocationSystem\BackendProject\Settings\JwtSettings.cs
	namespace 	
BackendProject
 
. 
Settings !
{ 
public 

class 
JwtSettings 
{ 
public 
string 
	SecretKey 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Issuer 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Audience 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
ExpiryMinutes  
{! "
get# &
;& '
set( +
;+ ,
}- .
}		 
}

 Ö
QC:\ParkingLotAllocationSystem\BackendProject\Service\Interface\IVehicleService.cs
	namespace 	
BackendProject
 
. 
Service  
.  !
	Interface! *
{ 
public 

	interface 
IVehicleService $
{ 
Task 
< 
IEnumerable 
< 
VehicleReadDto '
>' (
>( )
GetAllAsync* 5
(5 6
)6 7
;7 8
Task 
< 
VehicleReadDto 
> 
GetByIdAsync )
() *
int* -
id. 0
)0 1
;1 2
Task		 
<		 
IEnumerable		 
<		 
VehicleReadDto		 '
>		' (
>		( )
GetByUserIdAsync		* :
(		: ;
int		; >
userId		? E
)		E F
;		F G
Task

 
<

 
IEnumerable

 
<

 
VehicleReadDto

 '
>

' (
>

( )
SearchAsync

* 5
(

5 6
string

6 <
name

= A
)

A B
;

B C
Task 
< 
VehicleReadDto 
> 
CreateAsync (
(( )
VehicleCreateDto) 9
dto: =
)= >
;> ?
Task 
< 
VehicleReadDto 
> 
UpdateAsync (
(( )
int) ,
id- /
,/ 0
VehicleUpdateDto1 A
dtoB E
)E F
;F G
Task 
< 
bool 
> 
DeleteAsync 
( 
int "
id# %
)% &
;& '
Task 
< 
IEnumerable 
< 
VehicleReadDto '
>' (
>( )$
SearchByNumberPlateAsync* B
(B C
stringC I
plateJ O
)O P
;P Q
} 
} º
NC:\ParkingLotAllocationSystem\BackendProject\Service\Interface\IUserService.cs
	namespace 	
BackendProject
 
. 
Service  
.  !
	Interface! *
{ 
public 

	interface 
IUserService !
{ 
Task 
< 
IEnumerable 
< 
UserReadDto $
>$ %
>% &
GetAllAsync' 2
(2 3
)3 4
;4 5
Task		 
<		 
User		 
>		 
GetByIdAsync		 
(		  
int		  #
id		$ &
)		& '
;		' (
Task

 
<

 
UserReadDto

 
>

 
RegisterAsync

 '
(

' (
RegisterDto

( 3
dto

4 7
)

7 8
;

8 9
Task 
< 
UserReadDto 
> 

LoginAsync $
($ %
LoginDto% -
dto. 1
)1 2
;2 3
Task 
< 
bool 
> 
DeleteAsync 
( 
int "
id# %
)% &
;& '
Task 
< 
UserReadDto 
> 
UpdateAsync %
(% &
int& )
id* ,
,, -
UserUpdateDto. ;
dto< ?
)? @
;@ A
} 
} ¸
TC:\ParkingLotAllocationSystem\BackendProject\Service\Interface\IParkingLotService.cs
	namespace 	
BackendProject
 
. 
Service  
.  !
	Interface! *
{ 
public 

	interface 
IParkingLotService '
{ 
Task 
< 
IEnumerable 
< 
ParkingLotReadDto *
>* +
>+ ,
GetAllAsync- 8
(8 9
)9 :
;: ;
Task		 
<		 
ParkingLotReadDto		 
>		 
GetByIdAsync		  ,
(		, -
int		- 0
id		1 3
)		3 4
;		4 5
Task

 
<

 
ParkingLotReadDto

 
>

 
CreateAsync

  +
(

+ ,
ParkingLotCreateDto

, ?
dto

@ C
)

C D
;

D E
Task 
< 
ParkingLotReadDto 
> 
UpdateAsync  +
(+ ,
int, /
id0 2
,2 3
ParkingLotUpdateDto4 G
dtoH K
)K L
;L M
Task 
< 
bool 
> 
DeleteAsync 
( 
int "
id# %
)% &
;& '
Task 
< 
string 
> 
SeedLotsAsync "
(" #
)# $
;$ %
Task 
< 
IEnumerable 
< 
ParkingLotReadDto "
>" #
># $"
SearchByDateRangeAsync% ;
(; <
DateTime< D
fromE I
,I J
DateTimeK S
toT V
)V W
;W X
} 
} Ø
[C:\ParkingLotAllocationSystem\BackendProject\Service\Interface\IParkingAllocationService.cs
	namespace 	
BackendProject
 
. 
Service  
.  !
	Interface! *
{ 
public 

	interface %
IParkingAllocationService .
{ 
Task 
< 
IEnumerable 
< $
ParkingAllocationReadDto 1
>1 2
>2 3
GetAllAsync4 ?
(? @
)@ A
;A B
Task 
< $
ParkingAllocationReadDto %
>% &
GetByIdAsync' 3
(3 4
int4 7
id8 :
): ;
;; <
Task		 
<		 
IEnumerable		 
<		 $
ParkingAllocationReadDto		 1
>		1 2
>		2 3
GetByVehicleIdAsync		4 G
(		G H
int		H K
	vehicleId		L U
)		U V
;		V W
Task

 
<

 
IEnumerable

 
<

 $
ParkingAllocationReadDto

 1
>

1 2
>

2 3
GetByLotIdAsync

4 C
(

C D
int

D G
lotId

H M
)

M N
;

N O
Task 
< 
IEnumerable 
< $
ParkingAllocationReadDto 1
>1 2
>2 3"
SearchByDateRangeAsync4 J
(J K
DateTimeK S
fromT X
,X Y
DateTimeZ b
toc e
)e f
;f g
Task 
< $
ParkingAllocationReadDto %
>% &
CreateAsync' 2
(2 3&
ParkingAllocationCreateDto3 M
dtoN Q
)Q R
;R S
Task 
< $
ParkingAllocationReadDto %
>% &
UpdateAsync' 2
(2 3
int3 6
id7 9
,9 :&
ParkingAllocationUpdateDto; U
dtoV Y
)Y Z
;Z [
Task 
< 
bool 
> 
DeleteAsync 
( 
int "
id# %
)% &
;& '
} 
} ∆
MC:\ParkingLotAllocationSystem\BackendProject\Service\Interface\IJwtService.cs
	namespace 	
BackendProject
 
. 
Service  
.  !
	Interface! *
{ 
public 

	interface 
IJwtService  
{ 
string 
GenerateToken 
( 
User !
user" &
)& '
;' (
} 
}		 «é
UC:\ParkingLotAllocationSystem\BackendProject\Service\Implementation\VehicleService.cs
	namespace 	
BackendProject
 
. 
Service  
.  !
Implementation! /
{		 
public

 

class

 
VehicleService

 
:

  !
IVehicleService

" 1
{ 
private 
readonly 
IGenericRepository +
<+ ,
Vehicle, 3
>3 4
_repo5 :
;: ;
private 
readonly 
IvehicleRepository +
_vehicleRepo, 8
;8 9
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
ILogger  
<  !
VehicleService! /
>/ 0
_logger1 8
;8 9
public 
VehicleService 
( 
IGenericRepository 
< 
Vehicle &
>& '
repo( ,
,, -
IMapper 
mapper 
, 
IvehicleRepository 
vehicleRepo *
,* +
ILogger 
< 
VehicleService "
>" #
logger$ *
)* +
{ 	
_repo 
= 
repo 
; 
_mapper 
= 
mapper 
; 
_vehicleRepo 
= 
vehicleRepo &
;& '
_logger 
= 
logger 
; 
} 	
public 
async 
Task 
< 
VehicleReadDto (
>( )
GetByIdAsync* 6
(6 7
int7 :
id; =
)= >
{ 	
try 
{   
var!! 
vehicle!! 
=!! 
await!! #
_vehicleRepo!!$ 0
.!!0 1#
GetVehicleWithUserAsync!!1 H
(!!H I
id!!I K
)!!K L
;!!L M
if"" 
("" 
vehicle"" 
=="" 
null"" #
)""# $
{## 
_logger$$ 
.$$ 

LogWarning$$ &
($$& '
$str$$' Z
,$$Z [
id$$\ ^
)$$^ _
;$$_ `
return%% 
null%% 
;%%  
}&& 
_logger(( 
.(( 
LogInformation(( &
(((& '
$str((' M
,((M N
id((O Q
)((Q R
;((R S
return)) 
_mapper)) 
.)) 
Map)) "
<))" #
VehicleReadDto))# 1
>))1 2
())2 3
vehicle))3 :
))): ;
;)); <
}** 
catch++ 
(++ 
	Exception++ 
ex++ 
)++  
{,, 
_logger-- 
.-- 
LogError--  
(--  !
ex--! #
,--# $
$str--% R
,--R S
id--T V
)--V W
;--W X
return.. 
null.. 
;.. 
}// 
}00 	
public22 
async22 
Task22 
<22 
IEnumerable22 %
<22% &
VehicleReadDto22& 4
>224 5
>225 6
GetByUserIdAsync227 G
(22G H
int22H K
userId22L R
)22R S
{33 	
try44 
{55 
var66 
vehicles66 
=66 
await66 $
_repo66% *
.66* + 
GetAllIncludingAsync66+ ?
(66? @
v66@ A
=>66B D
v66E F
.66F G
User66G K
)66K L
;66L M
var77 
result77 
=77 
vehicles77 %
.77% &
Where77& +
(77+ ,
v77, -
=>77. 0
v771 2
.772 3
UserId773 9
==77: <
userId77= C
)77C D
;77D E
_logger88 
.88 
LogInformation88 &
(88& '
$str88' W
,88W X
result88Y _
.88_ `
Count88` e
(88e f
)88f g
,88g h
userId88i o
)88o p
;88p q
return99 
_mapper99 
.99 
Map99 "
<99" #
IEnumerable99# .
<99. /
VehicleReadDto99/ =
>99= >
>99> ?
(99? @
result99@ F
)99F G
;99G H
}:: 
catch;; 
(;; 
	Exception;; 
ex;; 
);;  
{<< 
_logger== 
.== 
LogError==  
(==  !
ex==! #
,==# $
$str==% T
,==T U
userId==V \
)==\ ]
;==] ^
return>> 

Enumerable>> !
.>>! "
Empty>>" '
<>>' (
VehicleReadDto>>( 6
>>>6 7
(>>7 8
)>>8 9
;>>9 :
}?? 
}@@ 	
publicBB 
asyncBB 
TaskBB 
<BB 
IEnumerableBB %
<BB% &
VehicleReadDtoBB& 4
>BB4 5
>BB5 6
GetAllAsyncBB7 B
(BBB C
)BBC D
{CC 	
tryDD 
{EE 
varFF 
vehiclesFF 
=FF 
awaitFF $
_repoFF% *
.FF* + 
GetAllIncludingAsyncFF+ ?
(FF? @
vFF@ A
=>FFB D
vFFE F
.FFF G
UserFFG K
)FFK L
;FFL M
_loggerGG 
.GG 
LogInformationGG &
(GG& '
$strGG' Y
,GGY Z
vehiclesGG[ c
.GGc d
CountGGd i
(GGi j
)GGj k
)GGk l
;GGl m
returnHH 
_mapperHH 
.HH 
MapHH "
<HH" #
IEnumerableHH# .
<HH. /
VehicleReadDtoHH/ =
>HH= >
>HH> ?
(HH? @
vehiclesHH@ H
)HHH I
;HHI J
}II 
catchJJ 
(JJ 
	ExceptionJJ 
exJJ 
)JJ  
{KK 
_loggerLL 
.LL 
LogErrorLL  
(LL  !
exLL! #
,LL# $
$strLL% C
)LLC D
;LLD E
returnMM 

EnumerableMM !
.MM! "
EmptyMM" '
<MM' (
VehicleReadDtoMM( 6
>MM6 7
(MM7 8
)MM8 9
;MM9 :
}NN 
}OO 	
publicQQ 
asyncQQ 
TaskQQ 
<QQ 
IEnumerableQQ %
<QQ% &
VehicleReadDtoQQ& 4
>QQ4 5
>QQ5 6
SearchAsyncQQ7 B
(QQB C
stringQQC I
nameQQJ N
)QQN O
{RR 	
trySS 
{TT 
varUU 
vehiclesUU 
=UU 
awaitUU $
_repoUU% *
.UU* + 
GetAllIncludingAsyncUU+ ?
(UU? @
vUU@ A
=>UUB D
vUUE F
.UUF G
UserUUG K
)UUK L
;UUL M
nameVV 
=VV 
nameVV 
.VV 
ToLowerVV #
(VV# $
)VV$ %
;VV% &
varXX 
filteredXX 
=XX 
vehiclesXX '
.XX' (
WhereXX( -
(XX- .
vXX. /
=>XX0 2
vZZ 
.ZZ 
MakeZZ 
.ZZ 
ToLowerZZ &
(ZZ& '
)ZZ' (
.ZZ( )
ContainsZZ) 1
(ZZ1 2
nameZZ2 6
)ZZ6 7
||ZZ8 :
v[[ 
.[[ 
NumberPlate[[ %
.[[% &
ToLower[[& -
([[- .
)[[. /
.[[/ 0
Contains[[0 8
([[8 9
name[[9 =
)[[= >
||[[? A
v\\ 
.\\ 
User\\ 
!=\\ !
null\\" &
&&\\' )
v\\* +
.\\+ ,
User\\, 0
.\\0 1
FullName\\1 9
.\\9 :
ToLower\\: A
(\\A B
)\\B C
.\\C D
Contains\\D L
(\\L M
name\\M Q
)\\Q R
)^^ 
;^^ 
_logger`` 
.`` 
LogInformation`` &
(``& '
$str``' `
,``` a
name``b f
,``f g
filtered``h p
.``p q
Count``q v
(``v w
)``w x
)``x y
;``y z
returnaa 
_mapperaa 
.aa 
Mapaa "
<aa" #
IEnumerableaa# .
<aa. /
VehicleReadDtoaa/ =
>aa= >
>aa> ?
(aa? @
filteredaa@ H
)aaH I
;aaI J
}bb 
catchcc 
(cc 
	Exceptioncc 
excc 
)cc  
{dd 
_loggeree 
.ee 
LogErroree  
(ee  !
exee! #
,ee# $
$stree% Q
,eeQ R
nameeeS W
)eeW X
;eeX Y
returnff 

Enumerableff !
.ff! "
Emptyff" '
<ff' (
VehicleReadDtoff( 6
>ff6 7
(ff7 8
)ff8 9
;ff9 :
}gg 
}hh 	
publicjj 
asyncjj 
Taskjj 
<jj 
VehicleReadDtojj (
>jj( )
CreateAsyncjj* 5
(jj5 6
VehicleCreateDtojj6 F
dtojjG J
)jjJ K
{kk 	
tryll 
{mm 
varnn 
existingnn 
=nn 
awaitnn $
_reponn% *
.nn* +
GetAllAsyncnn+ 6
(nn6 7
)nn7 8
;nn8 9
ifoo 
(oo 
existingoo 
.oo 
Anyoo  
(oo  !
voo! "
=>oo# %
voo& '
.oo' (
UserIdoo( .
==oo/ 1
dtooo2 5
.oo5 6
UserIdoo6 <
)oo< =
)oo= >
{pp 
_loggerqq 
.qq 

LogWarningqq &
(qq& '
$strqq' [
,qq[ \
dtoqq] `
.qq` a
UserIdqqa g
)qqg h
;qqh i
throwrr 
newrr %
InvalidOperationExceptionrr 7
(rr7 8
$strrr8 `
)rr` a
;rra b
}ss 
varuu 
entityuu 
=uu 
_mapperuu $
.uu$ %
Mapuu% (
<uu( )
Vehicleuu) 0
>uu0 1
(uu1 2
dtouu2 5
)uu5 6
;uu6 7
varvv 
createdvv 
=vv 
awaitvv #
_repovv$ )
.vv) *
AddAsyncvv* 2
(vv2 3
entityvv3 9
)vv9 :
;vv: ;
_loggerww 
.ww 
LogInformationww &
(ww& '
$strww' a
,wwa b
dtowwc f
.wwf g
UserIdwwg m
,wwm n
dtowwo r
.wwr s
NumberPlatewws ~
)ww~ 
;	ww Ä
returnyy 
_mapperyy 
.yy 
Mapyy "
<yy" #
VehicleReadDtoyy# 1
>yy1 2
(yy2 3
createdyy3 :
)yy: ;
;yy; <
}zz 
catch{{ 
({{ %
InvalidOperationException{{ ,
ex{{- /
){{/ 0
{|| 
_logger}} 
.}} 

LogWarning}} "
(}}" #
ex}}# %
,}}% &
$str}}' k
,}}k l
dto}}m p
.}}p q
UserId}}q w
)}}w x
;}}x y
throw~~ 
;~~ 
} 
catch
ÄÄ 
(
ÄÄ 
	Exception
ÄÄ 
ex
ÄÄ 
)
ÄÄ  
{
ÅÅ 
_logger
ÇÇ 
.
ÇÇ 
LogError
ÇÇ  
(
ÇÇ  !
ex
ÇÇ! #
,
ÇÇ# $
$str
ÇÇ% S
,
ÇÇS T
dto
ÇÇU X
.
ÇÇX Y
UserId
ÇÇY _
)
ÇÇ_ `
;
ÇÇ` a
return
ÉÉ 
null
ÉÉ 
;
ÉÉ 
}
ÑÑ 
}
ÖÖ 	
public
áá 
async
áá 
Task
áá 
<
áá 
VehicleReadDto
áá (
>
áá( )
UpdateAsync
áá* 5
(
áá5 6
int
áá6 9
id
áá: <
,
áá< =
VehicleUpdateDto
áá> N
dto
ááO R
)
ááR S
{
àà 	
try
ââ 
{
ää 
var
ãã 
existing
ãã 
=
ãã 
await
ãã $
_repo
ãã% *
.
ãã* +
GetByIdAsync
ãã+ 7
(
ãã7 8
id
ãã8 :
)
ãã: ;
;
ãã; <
if
åå 
(
åå 
existing
åå 
==
åå 
null
åå  $
)
åå$ %
{
çç 
_logger
éé 
.
éé 

LogWarning
éé &
(
éé& '
$str
éé' i
,
ééi j
id
éék m
)
éém n
;
één o
return
èè 
null
èè 
;
èè  
}
êê 
_mapper
íí 
.
íí 
Map
íí 
(
íí 
dto
íí 
,
íí  
existing
íí! )
)
íí) *
;
íí* +
await
ìì 
_repo
ìì 
.
ìì 
UpdateAsync
ìì '
(
ìì' (
existing
ìì( 0
)
ìì0 1
;
ìì1 2
_logger
îî 
.
îî 
LogInformation
îî &
(
îî& '
$str
îî' M
,
îîM N
id
îîO Q
)
îîQ R
;
îîR S
return
ïï 
_mapper
ïï 
.
ïï 
Map
ïï "
<
ïï" #
VehicleReadDto
ïï# 1
>
ïï1 2
(
ïï2 3
existing
ïï3 ;
)
ïï; <
;
ïï< =
}
ññ 
catch
óó 
(
óó 
	Exception
óó 
ex
óó 
)
óó  
{
òò 
_logger
ôô 
.
ôô 
LogError
ôô  
(
ôô  !
ex
ôô! #
,
ôô# $
$str
ôô% R
,
ôôR S
id
ôôT V
)
ôôV W
;
ôôW X
return
öö 
null
öö 
;
öö 
}
õõ 
}
úú 	
public
ûû 
async
ûû 
Task
ûû 
<
ûû 
IEnumerable
ûû %
<
ûû% &
VehicleReadDto
ûû& 4
>
ûû4 5
>
ûû5 6&
SearchByNumberPlateAsync
ûû7 O
(
ûûO P
string
ûûP V
plate
ûûW \
)
ûû\ ]
{
üü 	
try
†† 
{
°° 
var
¢¢ 
vehicles
¢¢ 
=
¢¢ 
await
¢¢ $
_repo
¢¢% *
.
¢¢* +"
GetAllIncludingAsync
¢¢+ ?
(
¢¢? @
v
¢¢@ A
=>
¢¢B D
v
¢¢E F
.
¢¢F G
User
¢¢G K
)
¢¢K L
;
¢¢L M
plate
££ 
=
££ 
plate
££ 
.
££ 
ToLower
££ %
(
££% &
)
££& '
;
££' (
var
•• 
filtered
•• 
=
•• 
vehicles
•• '
.
••' (
Where
••( -
(
••- .
v
••. /
=>
••0 2
v
¶¶ 
.
¶¶ 
NumberPlate
¶¶ !
.
¶¶! "
ToLower
¶¶" )
(
¶¶) *
)
¶¶* +
.
¶¶+ ,
Contains
¶¶, 4
(
¶¶4 5
plate
¶¶5 :
)
¶¶: ;
)
ßß 
;
ßß 
_logger
©© 
.
©© 
LogInformation
©© &
(
©©& '
$str
©©' d
,
©©d e
plate
©©f k
,
©©k l
filtered
©©m u
.
©©u v
Count
©©v {
(
©©{ |
)
©©| }
)
©©} ~
;
©©~ 
return
™™ 
_mapper
™™ 
.
™™ 
Map
™™ "
<
™™" #
IEnumerable
™™# .
<
™™. /
VehicleReadDto
™™/ =
>
™™= >
>
™™> ?
(
™™? @
filtered
™™@ H
)
™™H I
;
™™I J
}
´´ 
catch
¨¨ 
(
¨¨ 
	Exception
¨¨ 
ex
¨¨ 
)
¨¨  
{
≠≠ 
_logger
ÆÆ 
.
ÆÆ 
LogError
ÆÆ  
(
ÆÆ  !
ex
ÆÆ! #
,
ÆÆ# $
$str
ÆÆ% Z
,
ÆÆZ [
plate
ÆÆ\ a
)
ÆÆa b
;
ÆÆb c
return
ØØ 

Enumerable
ØØ !
.
ØØ! "
Empty
ØØ" '
<
ØØ' (
VehicleReadDto
ØØ( 6
>
ØØ6 7
(
ØØ7 8
)
ØØ8 9
;
ØØ9 :
}
∞∞ 
}
±± 	
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 
bool
≥≥ 
>
≥≥ 
DeleteAsync
≥≥  +
(
≥≥+ ,
int
≥≥, /
id
≥≥0 2
)
≥≥2 3
{
¥¥ 	
try
µµ 
{
∂∂ 
var
∑∑ 
entity
∑∑ 
=
∑∑ 
await
∑∑ "
_repo
∑∑# (
.
∑∑( )
GetByIdAsync
∑∑) 5
(
∑∑5 6
id
∑∑6 8
)
∑∑8 9
;
∑∑9 :
if
∏∏ 
(
∏∏ 
entity
∏∏ 
==
∏∏ 
null
∏∏ "
)
∏∏" #
{
ππ 
_logger
∫∫ 
.
∫∫ 

LogWarning
∫∫ &
(
∫∫& '
$str
∫∫' l
,
∫∫l m
id
∫∫n p
)
∫∫p q
;
∫∫q r
return
ªª 
false
ªª  
;
ªª  !
}
ºº 
await
ææ 
_repo
ææ 
.
ææ 
DeleteAsync
ææ '
(
ææ' (
id
ææ( *
)
ææ* +
;
ææ+ ,
_logger
øø 
.
øø 
LogInformation
øø &
(
øø& '
$str
øø' M
,
øøM N
id
øøO Q
)
øøQ R
;
øøR S
return
¿¿ 
true
¿¿ 
;
¿¿ 
}
¡¡ 
catch
¬¬ 
(
¬¬ 
	Exception
¬¬ 
ex
¬¬ 
)
¬¬  
{
√√ 
_logger
ƒƒ 
.
ƒƒ 
LogError
ƒƒ  
(
ƒƒ  !
ex
ƒƒ! #
,
ƒƒ# $
$str
ƒƒ% R
,
ƒƒR S
id
ƒƒT V
)
ƒƒV W
;
ƒƒW X
return
≈≈ 
false
≈≈ 
;
≈≈ 
}
∆∆ 
}
«« 	
}
»» 
}…… ≠j
RC:\ParkingLotAllocationSystem\BackendProject\Service\Implementation\UserService.cs
	namespace 	
BackendProject
 
. 
Service  
.  !
Implementation! /
{		 
public

 

class

 
UserService

 
:

 
IUserService

 +
{ 
private 
readonly 
IGenericRepository +
<+ ,
User, 0
>0 1
_repo2 7
;7 8
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
ILogger  
<  !
UserService! ,
>, -
_logger. 5
;5 6
public 
UserService 
( 
IGenericRepository -
<- .
User. 2
>2 3
repo4 8
,8 9
IMapper: A
mapperB H
,H I
ILoggerJ Q
<Q R
UserServiceR ]
>] ^
logger_ e
)e f
{ 	
_repo 
= 
repo 
; 
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
UserReadDto& 1
>1 2
>2 3
GetAllAsync4 ?
(? @
)@ A
{ 	
try 
{ 
var 
users 
= 
await !
_repo" '
.' (
GetAllAsync( 3
(3 4
)4 5
;5 6
_logger 
. 
LogInformation &
(& '
$str' ;
); <
;< =
return 
_mapper 
. 
Map "
<" #
IEnumerable# .
<. /
UserReadDto/ :
>: ;
>; <
(< =
users= B
)B C
;C D
} 
catch 
( 
	Exception 
ex 
)  
{   
_logger!! 
.!! 
LogError!!  
(!!  !
ex!!! #
,!!# $
$str!!% @
)!!@ A
;!!A B
return"" 

Enumerable"" !
.""! "
Empty""" '
<""' (
UserReadDto""( 3
>""3 4
(""4 5
)""5 6
;""6 7
}## 
}$$ 	
public&& 
async&& 
Task&& 
<&& 
User&& 
>&& 
GetByIdAsync&&  ,
(&&, -
int&&- 0
id&&1 3
)&&3 4
{'' 	
try(( 
{)) 
var** 
user** 
=** 
await**  
_repo**! &
.**& '
GetByIdAsync**' 3
(**3 4
id**4 6
)**6 7
;**7 8
if++ 
(++ 
user++ 
==++ 
null++  
)++  !
{,, 
_logger-- 
.-- 

LogWarning-- &
(--& '
$str--' W
,--W X
id--Y [
)--[ \
;--\ ]
return.. 
null.. 
;..  
}// 
_logger11 
.11 
LogInformation11 &
(11& '
$str11' F
,11F G
id11H J
)11J K
;11K L
return22 
user22 
;22 
}33 
catch44 
(44 
	Exception44 
ex44 
)44  
{55 
_logger66 
.66 
LogError66  
(66  !
ex66! #
,66# $
$str66% K
,66K L
id66M O
)66O P
;66P Q
return77 
null77 
;77 
}88 
}99 	
public;; 
async;; 
Task;; 
<;; 
UserReadDto;; %
>;;% &
RegisterAsync;;' 4
(;;4 5
RegisterDto;;5 @
dto;;A D
);;D E
{<< 	
try== 
{>> 
var@@ 
user@@ 
=@@ 
_mapper@@ "
.@@" #
Map@@# &
<@@& '
User@@' +
>@@+ ,
(@@, -
dto@@- 0
)@@0 1
;@@1 2
userAA 
.AA 
PasswordHashAA !
=AA" #
BCryptAA$ *
.AA* +
NetAA+ .
.AA. /
BCryptAA/ 5
.AA5 6
HashPasswordAA6 B
(AAB C
dtoAAC F
.AAF G
PasswordAAG O
)AAO P
;AAP Q
varCC 
createdCC 
=CC 
awaitCC #
_repoCC$ )
.CC) *
AddAsyncCC* 2
(CC2 3
userCC3 7
)CC7 8
;CC8 9
_loggerEE 
.EE 
LogInformationEE &
(EE& '
$strEE' K
,EEK L
userEEM Q
.EEQ R
EmailEER W
)EEW X
;EEX Y
returnFF 
_mapperFF 
.FF 
MapFF "
<FF" #
UserReadDtoFF# .
>FF. /
(FF/ 0
createdFF0 7
)FF7 8
;FF8 9
}GG 
catchHH 
(HH 
DbUpdateExceptionHH $
exHH% '
)HH' (
{II 
varJJ 
innerMsgJJ 
=JJ 
exJJ !
.JJ! "
InnerExceptionJJ" 0
?JJ0 1
.JJ1 2
MessageJJ2 9
??JJ: <
$strJJ= ?
;JJ? @
ifLL 
(LL 
innerMsgLL 
.LL 
ContainsLL %
(LL% &
$strLL& 6
)LL6 7
)LL7 8
{MM 
_loggerNN 
.NN 

LogWarningNN &
(NN& '
$strNN' V
,NNV W
dtoNNX [
.NN[ \
EmailNN\ a
)NNa b
;NNb c
returnOO 
newOO 
UserReadDtoOO *
{OO+ ,
FullNameOO- 5
=OO6 7
$strOO8 I
}OOJ K
;OOK L
}PP 
ifRR 
(RR 
innerMsgRR 
.RR 
ContainsRR %
(RR% &
$strRR& 7
)RR7 8
)RR8 9
{SS 
_loggerTT 
.TT 

LogWarningTT &
(TT& '
$strTT' X
,TTX Y
dtoTTZ ]
.TT] ^
MobileNumberTT^ j
)TTj k
;TTk l
returnUU 
newUU 
UserReadDtoUU *
{UU+ ,
FullNameUU- 5
=UU6 7
$strUU8 J
}UUK L
;UUL M
}VV 
_loggerXX 
.XX 
LogErrorXX  
(XX  !
exXX! #
,XX# $
$strXX% L
)XXL M
;XXM N
returnYY 
nullYY 
;YY 
}ZZ 
catch[[ 
([[ 
	Exception[[ 
ex[[ 
)[[  
{\\ 
_logger]] 
.]] 
LogError]]  
(]]  !
ex]]! #
,]]# $
$str]]% P
,]]P Q
dto]]R U
.]]U V
Email]]V [
)]][ \
;]]\ ]
return^^ 
null^^ 
;^^ 
}__ 
}`` 	
publiccc 
asynccc 
Taskcc 
<cc 
UserReadDtocc %
>cc% &

LoginAsynccc' 1
(cc1 2
LoginDtocc2 :
dtocc; >
)cc> ?
{dd 	
tryee 
{ff 
vargg 
usersgg 
=gg 
awaitgg !
_repogg" '
.gg' (
GetAllAsyncgg( 3
(gg3 4
)gg4 5
;gg5 6
varhh 
userhh 
=hh 
usershh  
.hh  !
FirstOrDefaulthh! /
(hh/ 0
uhh0 1
=>hh2 4
uhh5 6
.hh6 7
Emailhh7 <
==hh= ?
dtohh@ C
.hhC D
EmailhhD I
)hhI J
;hhJ K
ifjj 
(jj 
userjj 
==jj 
nulljj  
||jj! #
!jj$ %
BCryptjj% +
.jj+ ,
Netjj, /
.jj/ 0
BCryptjj0 6
.jj6 7
Verifyjj7 =
(jj= >
dtojj> A
.jjA B
PasswordjjB J
,jjJ K
userjjL P
.jjP Q
PasswordHashjjQ ]
)jj] ^
)jj^ _
{kk 
_loggerll 
.ll 

LogWarningll &
(ll& '
$strll' P
,llP Q
dtollR U
.llU V
EmailllV [
)ll[ \
;ll\ ]
returnmm 
nullmm 
;mm  
}nn 
_loggerpp 
.pp 
LogInformationpp &
(pp& '
$strpp' @
,pp@ A
userppB F
.ppF G
EmailppG L
)ppL M
;ppM N
returnqq 
_mapperqq 
.qq 
Mapqq "
<qq" #
UserReadDtoqq# .
>qq. /
(qq/ 0
userqq0 4
)qq4 5
;qq5 6
}rr 
catchss 
(ss 
	Exceptionss 
exss 
)ss  
{tt 
_loggeruu 
.uu 
LogErroruu  
(uu  !
exuu! #
,uu# $
$struu% K
,uuK L
dtouuM P
.uuP Q
EmailuuQ V
)uuV W
;uuW X
returnvv 
nullvv 
;vv 
}ww 
}xx 	
publiczz 
asynczz 
Taskzz 
<zz 
boolzz 
>zz 
DeleteAsynczz  +
(zz+ ,
intzz, /
idzz0 2
)zz2 3
{{{ 	
try|| 
{}} 
var~~ 
user~~ 
=~~ 
await~~  
_repo~~! &
.~~& '
GetByIdAsync~~' 3
(~~3 4
id~~4 6
)~~6 7
;~~7 8
if 
( 
user 
== 
null  
)  !
{
ÄÄ 
_logger
ÅÅ 
.
ÅÅ 

LogWarning
ÅÅ &
(
ÅÅ& '
$str
ÅÅ' k
,
ÅÅk l
id
ÅÅm o
)
ÅÅo p
;
ÅÅp q
return
ÇÇ 
false
ÇÇ  
;
ÇÇ  !
}
ÉÉ 
await
ÖÖ 
_repo
ÖÖ 
.
ÖÖ 
DeleteAsync
ÖÖ '
(
ÖÖ' (
id
ÖÖ( *
)
ÖÖ* +
;
ÖÖ+ ,
_logger
ÜÜ 
.
ÜÜ 
LogInformation
ÜÜ &
(
ÜÜ& '
$str
ÜÜ' G
,
ÜÜG H
id
ÜÜI K
)
ÜÜK L
;
ÜÜL M
return
áá 
true
áá 
;
áá 
}
àà 
catch
ââ 
(
ââ 
	Exception
ââ 
ex
ââ 
)
ââ  
{
ää 
_logger
ãã 
.
ãã 
LogError
ãã  
(
ãã  !
ex
ãã! #
,
ãã# $
$str
ãã% K
,
ããK L
id
ããM O
)
ããO P
;
ããP Q
return
åå 
false
åå 
;
åå 
}
çç 
}
éé 	
public
êê 
async
êê 
Task
êê 
<
êê 
UserReadDto
êê %
>
êê% &
UpdateAsync
êê' 2
(
êê2 3
int
êê3 6
id
êê7 9
,
êê9 :
UserUpdateDto
êê; H
dto
êêI L
)
êêL M
{
ëë 	
try
íí 
{
ìì 
var
îî 
user
îî 
=
îî 
await
îî  
_repo
îî! &
.
îî& '
GetByIdAsync
îî' 3
(
îî3 4
id
îî4 6
)
îî6 7
;
îî7 8
if
ïï 
(
ïï 
user
ïï 
==
ïï 
null
ïï  
)
ïï  !
{
ññ 
_logger
óó 
.
óó 

LogWarning
óó &
(
óó& '
$str
óó' f
,
óóf g
id
óóh j
)
óój k
;
óók l
return
òò 
null
òò 
;
òò  
}
ôô 
user
õõ 
.
õõ 
FullName
õõ 
=
õõ 
dto
õõ  #
.
õõ# $
FullName
õõ$ ,
;
õõ, -
user
úú 
.
úú 
MobileNumber
úú !
=
úú" #
dto
úú$ '
.
úú' (
MobileNumber
úú( 4
;
úú4 5
user
ùù 
.
ùù 
Email
ùù 
=
ùù 
dto
ùù  
.
ùù  !
Email
ùù! &
;
ùù& '
await
üü 
_repo
üü 
.
üü 
UpdateAsync
üü '
(
üü' (
user
üü( ,
)
üü, -
;
üü- .
_logger
†† 
.
†† 
LogInformation
†† &
(
††& '
$str
††' G
,
††G H
id
††I K
)
††K L
;
††L M
return
°° 
_mapper
°° 
.
°° 
Map
°° "
<
°°" #
UserReadDto
°°# .
>
°°. /
(
°°/ 0
user
°°0 4
)
°°4 5
;
°°5 6
}
¢¢ 
catch
££ 
(
££ 
	Exception
££ 
ex
££ 
)
££  
{
§§ 
_logger
•• 
.
•• 
LogError
••  
(
••  !
ex
••! #
,
••# $
$str
••% K
,
••K L
id
••M O
)
••O P
;
••P Q
return
¶¶ 
null
¶¶ 
;
¶¶ 
}
ßß 
}
®® 	
}
ππ 
}∫∫ ∑Ä
XC:\ParkingLotAllocationSystem\BackendProject\Service\Implementation\ParkingLotService.cs
	namespace 	
BackendProject
 
. 
Service  
.  !
Implementation! /
{		 
public

 

class

 
ParkingLotService

 "
:

# $
IParkingLotService

% 7
{ 
private 
readonly 
IGenericRepository +
<+ ,

ParkingLot, 6
>6 7
_repo8 =
;= >
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly !
IParkingLotRepository .!
_parkingLotRepository/ D
;D E
private 
readonly 
ILogger  
<  !
ParkingLotService! 2
>2 3
_logger4 ;
;; <
public 
ParkingLotService  
(  !
IGenericRepository 
< 

ParkingLot )
>) *
repo+ /
,/ 0
IMapper 
mapper 
, !
IParkingLotRepository ! 
parkingLotRepository" 6
,6 7
ILogger 
< 
ParkingLotService %
>% &
logger' -
)- .
{ 	
_repo 
= 
repo 
; 
_mapper 
= 
mapper 
; !
_parkingLotRepository !
=" # 
parkingLotRepository$ 8
;8 9
_logger 
= 
logger 
; 
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
ParkingLotReadDto& 7
>7 8
>8 9
GetAllAsync: E
(E F
)F G
{ 	
try 
{   
var!! 
lots!! 
=!! 
await!!  
_repo!!! &
.!!& ' 
GetAllIncludingAsync!!' ;
(!!; <
l!!< =
=>!!> @
l!!A B
.!!B C
Allocations!!C N
)!!N O
;!!O P
var"" 
today"" 
="" 
DateTime"" $
.""$ %
Today""% *
;""* +
var$$ 
result$$ 
=$$ 
lots$$ !
.&& 
Select&& 
(&& 
lot&& 
=>&&  "
{'' 
var(( 

isOccupied(( &
=((' (
lot(() ,
.((, -
Allocations((- 8
.((8 9
Any((9 <
(((< =
a((= >
=>((? A
a** 
.** 
AllocatedFromDate** /
.**/ 0
Date**0 4
<=**5 7
today**8 =
&&**> @
a++ 
.++ 
AllocatedUptoDate++ /
.++/ 0
Date++0 4
>=++5 7
today++8 =
)++= >
;++> ?
var-- 
dto-- 
=--  !
_mapper--" )
.--) *
Map--* -
<--- .
ParkingLotReadDto--. ?
>--? @
(--@ A
lot--A D
)--D E
;--E F
dto.. 
... 

IsOccupied.. &
=..' (

isOccupied..) 3
;..3 4
return// 
dto// "
;//" #
}00 
)00 
;00 
_logger22 
.22 
LogInformation22 &
(22& '
$str22' F
,22F G
result22H N
.22N O
Count22O T
(22T U
)22U V
)22V W
;22W X
return33 
result33 
;33 
}44 
catch55 
(55 
	Exception55 
ex55 
)55  
{66 
_logger77 
.77 
LogError77  
(77  !
ex77! #
,77# $
$str77% ;
)77; <
;77< =
throw88 
;88 
}99 
}:: 	
public<< 
async<< 
Task<< 
<<< 
ParkingLotReadDto<< +
><<+ ,
GetByIdAsync<<- 9
(<<9 :
int<<: =
id<<> @
)<<@ A
{== 	
try>> 
{?? 
var@@ 
lot@@ 
=@@ 
await@@ 
_repo@@  %
.@@% &
GetByIdAsync@@& 2
(@@2 3
id@@3 5
)@@5 6
;@@6 7
ifAA 
(AA 
lotAA 
==AA 
nullAA 
)AA  
{BB 
_loggerCC 
.CC 

LogWarningCC &
(CC& '
$strCC' W
,CCW X
idCCY [
)CC[ \
;CC\ ]
returnDD 
nullDD 
;DD  
}EE 
returnGG 
_mapperGG 
.GG 
MapGG "
<GG" #
ParkingLotReadDtoGG# 4
>GG4 5
(GG5 6
lotGG6 9
)GG9 :
;GG: ;
}HH 
catchII 
(II 
	ExceptionII 
exII 
)II  
{JJ 
_loggerKK 
.KK 
LogErrorKK  
(KK  !
exKK! #
,KK# $
$strKK% I
,KKI J
idKKK M
)KKM N
;KKN O
throwLL 
;LL 
}MM 
}NN 	
publicPP 
asyncPP 
TaskPP 
<PP 
ParkingLotReadDtoPP +
>PP+ ,
CreateAsyncPP- 8
(PP8 9
ParkingLotCreateDtoPP9 L
dtoPPM P
)PPP Q
{QQ 	
tryRR 
{SS 
varTT 
entityTT 
=TT 
_mapperTT $
.TT$ %
MapTT% (
<TT( )

ParkingLotTT) 3
>TT3 4
(TT4 5
dtoTT5 8
)TT8 9
;TT9 :
varUU 
createdUU 
=UU 
awaitUU #
_repoUU$ )
.UU) *
AddAsyncUU* 2
(UU2 3
entityUU3 9
)UU9 :
;UU: ;
_loggerVV 
.VV 
LogInformationVV &
(VV& '
$strVV' M
,VVM N
createdVVO V
.VVV W
ParkingLotIdVVW c
)VVc d
;VVd e
returnWW 
_mapperWW 
.WW 
MapWW "
<WW" #
ParkingLotReadDtoWW# 4
>WW4 5
(WW5 6
createdWW6 =
)WW= >
;WW> ?
}XX 
catchYY 
(YY 
	ExceptionYY 
exYY 
)YY  
{ZZ 
_logger[[ 
.[[ 
LogError[[  
([[  !
ex[[! #
,[[# $
$str[[% ;
)[[; <
;[[< =
throw\\ 
;\\ 
}]] 
}^^ 	
public`` 
async`` 
Task`` 
<`` 
ParkingLotReadDto`` +
>``+ ,
UpdateAsync``- 8
(``8 9
int``9 <
id``= ?
,``? @
ParkingLotUpdateDto``A T
dto``U X
)``X Y
{aa 	
trybb 
{cc 
vardd 
existingdd 
=dd 
awaitdd $
_repodd% *
.dd* +
GetByIdAsyncdd+ 7
(dd7 8
iddd8 :
)dd: ;
;dd; <
ifee 
(ee 
existingee 
==ee 
nullee  $
)ee$ %
{ff 
_loggergg 
.gg 

LogWarninggg &
(gg& '
$strgg' ]
,gg] ^
idgg_ a
)gga b
;ggb c
returnhh 
nullhh 
;hh  
}ii 
_mapperkk 
.kk 
Mapkk 
(kk 
dtokk 
,kk  
existingkk! )
)kk) *
;kk* +
awaitll 
_repoll 
.ll 
UpdateAsyncll '
(ll' (
existingll( 0
)ll0 1
;ll1 2
_loggernn 
.nn 
LogInformationnn &
(nn& '
$strnn' D
,nnD E
idnnF H
)nnH I
;nnI J
returnoo 
_mapperoo 
.oo 
Mapoo "
<oo" #
ParkingLotReadDtooo# 4
>oo4 5
(oo5 6
existingoo6 >
)oo> ?
;oo? @
}pp 
catchqq 
(qq 
	Exceptionqq 
exqq 
)qq  
{rr 
_loggerss 
.ss 
LogErrorss  
(ss  !
exss! #
,ss# $
$strss% G
,ssG H
idssI K
)ssK L
;ssL M
throwtt 
;tt 
}uu 
}vv 	
publicxx 
asyncxx 
Taskxx 
<xx 
boolxx 
>xx 
DeleteAsyncxx  +
(xx+ ,
intxx, /
idxx0 2
)xx2 3
{yy 	
tryzz 
{{{ 
var|| 
lot|| 
=|| 
await|| 
_repo||  %
.||% &
GetByIdAsync||& 2
(||2 3
id||3 5
)||5 6
;||6 7
if}} 
(}} 
lot}} 
==}} 
null}} 
)}}  
{~~ 
_logger 
. 

LogWarning &
(& '
$str' p
,p q
idr t
)t u
;u v
return
ÄÄ 
false
ÄÄ  
;
ÄÄ  !
}
ÅÅ 
await
ÉÉ 
_repo
ÉÉ 
.
ÉÉ 
DeleteAsync
ÉÉ '
(
ÉÉ' (
id
ÉÉ( *
)
ÉÉ* +
;
ÉÉ+ ,
_logger
ÑÑ 
.
ÑÑ 
LogInformation
ÑÑ &
(
ÑÑ& '
$str
ÑÑ' D
,
ÑÑD E
id
ÑÑF H
)
ÑÑH I
;
ÑÑI J
return
ÖÖ 
true
ÖÖ 
;
ÖÖ 
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
ex
áá 
)
áá  
{
àà 
_logger
ââ 
.
ââ 
LogError
ââ  
(
ââ  !
ex
ââ! #
,
ââ# $
$str
ââ% G
,
ââG H
id
ââI K
)
ââK L
;
ââL M
throw
ää 
;
ää 
}
ãã 
}
åå 	
public
éé 
async
éé 
Task
éé 
<
éé 
IEnumerable
éé %
<
éé% &
ParkingLotReadDto
éé& 7
>
éé7 8
>
éé8 9$
SearchByDateRangeAsync
éé: P
(
ééP Q
DateTime
ééQ Y
from
ééZ ^
,
éé^ _
DateTime
éé` h
to
ééi k
)
éék l
{
èè 	
try
êê 
{
ëë 
var
íí $
overlappingAllocations
íí *
=
íí+ ,
await
íí- 2#
_parkingLotRepository
íí3 H
.
ìì 
Allocations
ìì  
.
îî 
Where
îî 
(
îî 
a
îî 
=>
îî 
a
ïï  !
.
ïï! "
AllocatedFromDate
ïï" 3
<=
ïï4 6
to
ïï7 9
&&
ïï: <
a
ññ  !
.
ññ! "
AllocatedUptoDate
ññ" 3
>=
ññ4 6
from
ññ7 ;
)
ññ; <
.
óó 
Select
óó 
(
óó 
a
óó 
=>
óó  
a
óó! "
.
óó" #
ParkingLotId
óó# /
)
óó/ 0
.
òò 
Distinct
òò 
(
òò 
)
òò 
.
ôô 
ToListAsync
ôô  
(
ôô  !
)
ôô! "
;
ôô" #
var
õõ 
availableLots
õõ !
=
õõ" #
await
õõ$ )#
_parkingLotRepository
õõ* ?
.
úú 
Lots
úú 
.
ùù 
Where
ùù 
(
ùù 
l
ùù 
=>
ùù 
!
ùù  !$
overlappingAllocations
ùù! 7
.
ùù7 8
Contains
ùù8 @
(
ùù@ A
l
ùùA B
.
ùùB C
ParkingLotId
ùùC O
)
ùùO P
)
ùùP Q
.
ûû 
ToListAsync
ûû  
(
ûû  !
)
ûû! "
;
ûû" #
_logger
†† 
.
†† 
LogInformation
†† &
(
††& '
$str
††' ^
,
††^ _
availableLots
††` m
.
††m n
Count
††n s
,
††s t
from
††u y
,
††y z
to
††{ }
)
††} ~
;
††~ 
return
°° 
_mapper
°° 
.
°° 
Map
°° "
<
°°" #
IEnumerable
°°# .
<
°°. /
ParkingLotReadDto
°°/ @
>
°°@ A
>
°°A B
(
°°B C
availableLots
°°C P
)
°°P Q
;
°°Q R
}
¢¢ 
catch
££ 
(
££ 
	Exception
££ 
ex
££ 
)
££  
{
§§ 
_logger
•• 
.
•• 
LogError
••  
(
••  !
ex
••! #
,
••# $
$str
••% F
)
••F G
;
••G H
throw
¶¶ 
;
¶¶ 
}
ßß 
}
®® 	
public
™™ 
async
™™ 
Task
™™ 
<
™™ 
string
™™  
>
™™  !
SeedLotsAsync
™™" /
(
™™/ 0
)
™™0 1
{
´´ 	
try
¨¨ 
{
≠≠ 
var
ÆÆ 
all
ÆÆ 
=
ÆÆ 
await
ÆÆ 
_repo
ÆÆ  %
.
ÆÆ% &
GetAllAsync
ÆÆ& 1
(
ÆÆ1 2
)
ÆÆ2 3
;
ÆÆ3 4
if
ØØ 
(
ØØ 
all
ØØ 
.
ØØ 
Any
ØØ 
(
ØØ 
)
ØØ 
)
ØØ 
{
∞∞ 
_logger
±± 
.
±± 
LogInformation
±± *
(
±±* +
$str
±±+ V
)
±±V W
;
±±W X
return
≤≤ 
$str
≤≤ 1
;
≤≤1 2
}
≥≥ 
var
µµ 
lots
µµ 
=
µµ 
new
µµ 
List
µµ #
<
µµ# $

ParkingLot
µµ$ .
>
µµ. /
(
µµ/ 0
)
µµ0 1
;
µµ1 2
for
∂∂ 
(
∂∂ 
char
∂∂ 
section
∂∂ !
=
∂∂" #
$char
∂∂$ '
;
∂∂' (
section
∂∂) 0
<=
∂∂1 3
$char
∂∂4 7
;
∂∂7 8
section
∂∂9 @
++
∂∂@ B
)
∂∂B C
{
∑∑ 
for
∏∏ 
(
∏∏ 
int
∏∏ 
number
∏∏ #
=
∏∏$ %
$num
∏∏& '
;
∏∏' (
number
∏∏) /
<=
∏∏0 2
$num
∏∏3 5
;
∏∏5 6
number
∏∏7 =
++
∏∏= ?
)
∏∏? @
{
ππ 
lots
∫∫ 
.
∫∫ 
Add
∫∫  
(
∫∫  !
new
∫∫! $

ParkingLot
∫∫% /
{
ªª 
	LotNumber
ºº %
=
ºº& '
$"
ºº( *
{
ºº* +
section
ºº+ 2
}
ºº2 3
{
ºº3 4
number
ºº4 :
:
ºº: ;
$str
ºº; =
}
ºº= >
"
ºº> ?
,
ºº? @
Location
ΩΩ $
=
ΩΩ% &
section
ΩΩ' .
<=
ΩΩ/ 1
$char
ΩΩ2 5
?
ΩΩ6 7
$str
ΩΩ8 F
:
ΩΩG H
$str
ΩΩI V
,
ΩΩV W
}
ææ 
)
ææ 
;
ææ 
}
øø 
}
¿¿ 
foreach
¬¬ 
(
¬¬ 
var
¬¬ 
lot
¬¬  
in
¬¬! #
lots
¬¬$ (
)
¬¬( )
{
√√ 
await
ƒƒ 
_repo
ƒƒ 
.
ƒƒ  
AddAsync
ƒƒ  (
(
ƒƒ( )
lot
ƒƒ) ,
)
ƒƒ, -
;
ƒƒ- .
}
≈≈ 
_logger
«« 
.
«« 
LogInformation
«« &
(
««& '
$str
««' E
,
««E F
lots
««G K
.
««K L
Count
««L Q
)
««Q R
;
««R S
return
»» 
$"
»» 
$str
»»  
{
»»  !
lots
»»! %
.
»»% &
Count
»»& +
}
»»+ ,
$str
»», J
"
»»J K
;
»»K L
}
…… 
catch
   
(
   
	Exception
   
ex
   
)
    
{
ÀÀ 
_logger
ÃÃ 
.
ÃÃ 
LogError
ÃÃ  
(
ÃÃ  !
ex
ÃÃ! #
,
ÃÃ# $
$str
ÃÃ% =
)
ÃÃ= >
;
ÃÃ> ?
throw
ÕÕ 
;
ÕÕ 
}
ŒŒ 
}
œœ 	
}
–– 
}—— πô
_C:\ParkingLotAllocationSystem\BackendProject\Service\Implementation\ParkingAllocationService.cs
	namespace 	
BackendProject
 
. 
Service  
.  !
Implementation! /
{		 
public

 

class

 $
ParkingAllocationService

 )
:

* +%
IParkingAllocationService

, E
{ 
private 
readonly 
IGenericRepository +
<+ ,
ParkingAllocation, =
>= >
_repo? D
;D E
private 
readonly 
IMapper  
_mapper! (
;( )
public $
ParkingAllocationService '
(' (
IGenericRepository( :
<: ;
ParkingAllocation; L
>L M
repoN R
,R S
IMapperT [
mapper\ b
)b c
{ 	
_repo 
= 
repo 
; 
_mapper 
= 
mapper 
; 
} 	
public 
async 
Task 
< 
IEnumerable %
<% &$
ParkingAllocationReadDto& >
>> ?
>? @
GetAllAsyncA L
(L M
)M N
{ 	
try 
{ 
var 
allocations 
=  !
await" '
_repo( -
.- . 
GetAllIncludingAsync. B
(B C
aC D
=>E G
aH I
.I J
VehicleJ Q
,Q R
aS T
=>U W
aX Y
.Y Z

ParkingLotZ d
)d e
;e f
return 
_mapper 
. 
Map "
<" #
IEnumerable# .
<. /$
ParkingAllocationReadDto/ G
>G H
>H I
(I J
allocationsJ U
)U V
;V W
} 
catch 
( 
	Exception 
ex 
)  
{ 
Log 
. 
Error 
( 
ex 
, 
$str =
)= >
;> ?
throw 
; 
}   
}!! 	
public## 
async## 
Task## 
<## $
ParkingAllocationReadDto## 2
>##2 3
GetByIdAsync##4 @
(##@ A
int##A D
id##E G
)##G H
{$$ 	
try%% 
{&& 
var'' 

allocation'' 
=''  
await''! &
_repo''' ,
.'', -!
GetByIdIncludingAsync''- B
(''B C
id''C E
,''E F
a''G H
=>''I K
a''L M
.''M N
Vehicle''N U
,''U V
a''W X
=>''Y [
a''\ ]
.''] ^

ParkingLot''^ h
)''h i
;''i j
if(( 
((( 

allocation(( 
==(( !
null((" &
)((& '
{((( )
return)) 
null)) 
;))  
}** 
return++ 
_mapper++ 
.++ 
Map++ "
<++" #$
ParkingAllocationReadDto++# ;
>++; <
(++< =

allocation++= G
)++G H
;++H I
},, 
catch-- 
(-- 
	Exception-- 
ex-- 
)--  
{.. 
Log// 
.// 
Error// 
(// 
ex// 
,// 
$str// L
,//L M
id//N P
)//P Q
;//Q R
throw00 
;00 
}11 
}22 	
public44 
async44 
Task44 
<44 
IEnumerable44 %
<44% &$
ParkingAllocationReadDto44& >
>44> ?
>44? @
GetByVehicleIdAsync44A T
(44T U
int44U X
	vehicleId44Y b
)44b c
{55 	
try66 
{77 
var88 
allocations88 
=88  !
await88" '
_repo88( -
.88- . 
GetAllIncludingAsync88. B
(88B C
a88C D
=>88E G
a88H I
.88I J
Vehicle88J Q
,88Q R
a88S T
=>88U W
a88X Y
.88Y Z

ParkingLot88Z d
)88d e
;88e f
var99 
filtered99 
=99 
allocations99 *
.99* +
Where99+ 0
(990 1
a991 2
=>993 5
a996 7
.997 8
	VehicleId998 A
==99B D
	vehicleId99E N
)99N O
;99O P
return:: 
_mapper:: 
.:: 
Map:: "
<::" #
IEnumerable::# .
<::. /$
ParkingAllocationReadDto::/ G
>::G H
>::H I
(::I J
filtered::J R
)::R S
;::S T
};; 
catch<< 
(<< 
	Exception<< 
ex<< 
)<<  
{== 
Log>> 
.>> 
Error>> 
(>> 
ex>> 
,>> 
$str>> a
,>>a b
	vehicleId>>c l
)>>l m
;>>m n
throw?? 
;?? 
}@@ 
}AA 	
publicCC 
asyncCC 
TaskCC 
<CC 
IEnumerableCC %
<CC% &$
ParkingAllocationReadDtoCC& >
>CC> ?
>CC? @
GetByLotIdAsyncCCA P
(CCP Q
intCCQ T
lotIdCCU Z
)CCZ [
{DD 	
tryEE 
{FF 
varGG 
allGG 
=GG 
awaitGG 
_repoGG  %
.GG% & 
GetAllIncludingAsyncGG& :
(GG: ;
aGG; <
=>GG= ?
aGG@ A
.GGA B
VehicleGGB I
,GGI J
aGGK L
=>GGM O
aGGP Q
.GGQ R

ParkingLotGGR \
)GG\ ]
;GG] ^
returnHH 
_mapperHH 
.HH 
MapHH "
<HH" #
IEnumerableHH# .
<HH. /$
ParkingAllocationReadDtoHH/ G
>HHG H
>HHH I
(HHI J
allHHJ M
.HHM N
WhereHHN S
(HHS T
aHHT U
=>HHV X
aHHY Z
.HHZ [
ParkingLotIdHH[ g
==HHh j
lotIdHHk p
)HHp q
)HHq r
;HHr s
}II 
catchJJ 
(JJ 
	ExceptionJJ 
exJJ 
)JJ  
{KK 
LogLL 
.LL 
ErrorLL 
(LL 
exLL 
,LL 
$strLL U
,LLU V
lotIdLLW \
)LL\ ]
;LL] ^
throwMM 
;MM 
}NN 
}OO 	
publicQQ 
asyncQQ 
TaskQQ 
<QQ 
IEnumerableQQ %
<QQ% &$
ParkingAllocationReadDtoQQ& >
>QQ> ?
>QQ? @"
SearchByDateRangeAsyncQQA W
(QQW X
DateTimeQQX `
fromQQa e
,QQe f
DateTimeQQg o
toQQp r
)QQr s
{RR 	
trySS 
{TT 
varUU 
allUU 
=UU 
awaitUU 
_repoUU  %
.UU% & 
GetAllIncludingAsyncUU& :
(UU: ;
aUU; <
=>UU= ?
aUU@ A
.UUA B
VehicleUUB I
,UUI J
aUUK L
=>UUM O
aUUP Q
.UUQ R

ParkingLotUUR \
)UU\ ]
;UU] ^
returnVV 
_mapperVV 
.VV 
MapVV "
<VV" #
IEnumerableVV# .
<VV. /$
ParkingAllocationReadDtoVV/ G
>VVG H
>VVH I
(VVI J
allVVJ M
.WW 
WhereWW 
(WW 
aWW 
=>WW 
aWW  !
.WW! "
AllocatedFromDateWW" 3
<=WW4 6
toWW7 9
&&WW: <
aWW= >
.WW> ?
AllocatedUptoDateWW? P
>=WWQ S
fromWWT X
)WWX Y
)WWY Z
;WWZ [
}XX 
catchYY 
(YY 
	ExceptionYY 
exYY 
)YY  
{ZZ 
Log[[ 
.[[ 
Error[[ 
([[ 
ex[[ 
,[[ 
$str[[ S
,[[S T
from[[U Y
,[[Y Z
to[[[ ]
)[[] ^
;[[^ _
throw\\ 
;\\ 
}]] 
}^^ 	
public`` 
async`` 
Task`` 
<`` $
ParkingAllocationReadDto`` 2
>``2 3
CreateAsync``4 ?
(``? @&
ParkingAllocationCreateDto``@ Z
dto``[ ^
)``^ _
{aa 	
trybb 
{cc 
vardd 
fromDatedd 
=dd 
dtodd "
.dd" #
AllocatedFromDatedd# 4
.dd4 5

ToDateTimedd5 ?
(dd? @
TimeOnlydd@ H
.ddH I
MinValueddI Q
)ddQ R
;ddR S
varee 
toDateee 
=ee 
dtoee  
.ee  !
AllocatedUptoDateee! 2
.ee2 3

ToDateTimeee3 =
(ee= >
TimeOnlyee> F
.eeF G
MaxValueeeG O
)eeO P
;eeP Q
ifgg 
(gg 
toDategg 
<gg 
fromDategg %
)gg% &
throwhh 
newhh 
	Exceptionhh '
(hh' (
$strhh( _
)hh_ `
;hh` a
varjj 
existingjj 
=jj 
awaitjj $
_repojj% *
.jj* + 
GetAllIncludingAsyncjj+ ?
(jj? @
ajj@ A
=>jjB D
ajjE F
.jjF G
VehiclejjG N
,jjN O
ajjP Q
=>jjR T
ajjU V
.jjV W

ParkingLotjjW a
)jja b
;jjb c
boolll 
conflictll 
=ll 
existingll  (
.ll( )
Anyll) ,
(ll, -
all- .
=>ll/ 1
amm 
.mm 
ParkingLotIdmm "
==mm# %
dtomm& )
.mm) *
ParkingLotIdmm* 6
&&mm7 9
ann 
.nn 
AllocatedFromDatenn '
<=nn( *
toDatenn+ 1
&&nn2 4
aoo 
.oo 
AllocatedUptoDateoo '
>=oo( *
fromDateoo+ 3
)oo3 4
;oo4 5
ifqq 
(qq 
conflictqq 
)qq 
throwrr 
newrr 
	Exceptionrr '
(rr' (
$strrr( c
)rrc d
;rrd e
booltt 
vehicleOverlaptt #
=tt$ %
existingtt& .
.tt. /
Anytt/ 2
(tt2 3
att3 4
=>tt5 7
auu 
.uu 
	VehicleIduu 
==uu  "
dtouu# &
.uu& '
	VehicleIduu' 0
&&uu1 3
avv 
.vv 
AllocatedFromDatevv '
<=vv( *
toDatevv+ 1
&&vv2 4
aww 
.ww 
AllocatedUptoDateww '
>=ww( *
fromDateww+ 3
)ww3 4
;ww4 5
ifyy 
(yy 
vehicleOverlapyy "
)yy" #
throwzz 
newzz 
	Exceptionzz '
(zz' (
$strzz( ~
)zz~ 
;	zz Ä
var|| 

allocation|| 
=||  
_mapper||! (
.||( )
Map||) ,
<||, -
ParkingAllocation||- >
>||> ?
(||? @
dto||@ C
)||C D
;||D E

allocation}} 
.}} 
AllocatedFromDate}} ,
=}}- .
fromDate}}/ 7
;}}7 8

allocation~~ 
.~~ 
AllocatedUptoDate~~ ,
=~~- .
toDate~~/ 5
;~~5 6
await
ÄÄ 
_repo
ÄÄ 
.
ÄÄ 
AddAsync
ÄÄ $
(
ÄÄ$ %

allocation
ÄÄ% /
)
ÄÄ/ 0
;
ÄÄ0 1
var
ÇÇ 
full
ÇÇ 
=
ÇÇ 
(
ÇÇ 
await
ÇÇ !
_repo
ÇÇ" '
.
ÇÇ' ("
GetAllIncludingAsync
ÇÇ( <
(
ÇÇ< =
a
ÇÇ= >
=>
ÇÇ? A
a
ÇÇB C
.
ÇÇC D
Vehicle
ÇÇD K
,
ÇÇK L
a
ÇÇM N
=>
ÇÇO Q
a
ÇÇR S
.
ÇÇS T

ParkingLot
ÇÇT ^
)
ÇÇ^ _
)
ÇÇ_ `
.
ÉÉ 
FirstOrDefault
ÉÉ #
(
ÉÉ# $
a
ÉÉ$ %
=>
ÉÉ& (
a
ÉÉ) *
.
ÉÉ* +
AllocationId
ÉÉ+ 7
==
ÉÉ8 :

allocation
ÉÉ; E
.
ÉÉE F
AllocationId
ÉÉF R
)
ÉÉR S
;
ÉÉS T
return
ÖÖ 
_mapper
ÖÖ 
.
ÖÖ 
Map
ÖÖ "
<
ÖÖ" #&
ParkingAllocationReadDto
ÖÖ# ;
>
ÖÖ; <
(
ÖÖ< =
full
ÖÖ= A
)
ÖÖA B
;
ÖÖB C
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
ex
áá 
)
áá  
{
àà 
Log
ââ 
.
ââ 
Error
ââ 
(
ââ 
ex
ââ 
,
ââ 
$str
ââ m
,
ââm n
dto
ââo r
.
ââr s
	VehicleId
ââs |
,
ââ| }
dtoââ~ Å
.ââÅ Ç
ParkingLotIdââÇ é
)ââé è
;ââè ê
throw
ää 
;
ää 
}
ãã 
}
åå 	
public
éé 
async
éé 
Task
éé 
<
éé &
ParkingAllocationReadDto
éé 2
>
éé2 3
UpdateAsync
éé4 ?
(
éé? @
int
éé@ C
id
ééD F
,
ééF G(
ParkingAllocationUpdateDto
ééH b
dto
ééc f
)
ééf g
{
èè 	
try
êê 
{
ëë 
var
íí 
fromDate
íí 
=
íí 
dto
íí "
.
íí" #
AllocatedFromDate
íí# 4
.
íí4 5

ToDateTime
íí5 ?
(
íí? @
TimeOnly
íí@ H
.
ííH I
MinValue
ííI Q
)
ííQ R
;
ííR S
var
ìì 
toDate
ìì 
=
ìì 
dto
ìì  
.
ìì  !
AllocatedUptoDate
ìì! 2
.
ìì2 3

ToDateTime
ìì3 =
(
ìì= >
TimeOnly
ìì> F
.
ììF G
MaxValue
ììG O
)
ììO P
;
ììP Q
if
ïï 
(
ïï 
toDate
ïï 
<
ïï 
fromDate
ïï %
)
ïï% &
throw
ññ 
new
ññ 
	Exception
ññ '
(
ññ' (
$str
ññ( _
)
ññ_ `
;
ññ` a
var
òò 
existing
òò 
=
òò 
await
òò $
_repo
òò% *
.
òò* +#
GetByIdIncludingAsync
òò+ @
(
òò@ A
id
òòA C
,
òòC D
a
òòE F
=>
òòG I
a
òòJ K
.
òòK L
Vehicle
òòL S
,
òòS T
a
òòU V
=>
òòW Y
a
òòZ [
.
òò[ \

ParkingLot
òò\ f
)
òòf g
;
òòg h
if
ôô 
(
ôô 
existing
ôô 
==
ôô 
null
ôô  $
)
ôô$ %
return
ôô& ,
null
ôô- 1
;
ôô1 2
var
õõ 
all
õõ 
=
õõ 
await
õõ 
_repo
õõ  %
.
õõ% &
GetAllAsync
õõ& 1
(
õõ1 2
)
õõ2 3
;
õõ3 4
bool
úú 
conflict
úú 
=
úú 
all
úú  #
.
úú# $
Any
úú$ '
(
úú' (
a
úú( )
=>
úú* ,
a
ùù 
.
ùù 
AllocationId
ùù "
!=
ùù# %
id
ùù& (
&&
ùù) +
a
ûû 
.
ûû 
ParkingLotId
ûû "
==
ûû# %
dto
ûû& )
.
ûû) *
ParkingLotId
ûû* 6
&&
ûû7 9
a
üü 
.
üü 
AllocatedFromDate
üü '
<=
üü( *
toDate
üü+ 1
&&
üü2 4
a
†† 
.
†† 
AllocatedUptoDate
†† '
>=
††( *
fromDate
††+ 3
)
††3 4
;
††4 5
if
¢¢ 
(
¢¢ 
conflict
¢¢ 
)
¢¢ 
throw
££ 
new
££ 
	Exception
££ '
(
££' (
$str
££( z
)
££z {
;
££{ |
_mapper
•• 
.
•• 
Map
•• 
(
•• 
dto
•• 
,
••  
existing
••! )
)
••) *
;
••* +
existing
¶¶ 
.
¶¶ 
AllocatedFromDate
¶¶ *
=
¶¶+ ,
fromDate
¶¶- 5
;
¶¶5 6
existing
ßß 
.
ßß 
AllocatedUptoDate
ßß *
=
ßß+ ,
toDate
ßß- 3
;
ßß3 4
await
©© 
_repo
©© 
.
©© 
UpdateAsync
©© '
(
©©' (
existing
©©( 0
)
©©0 1
;
©©1 2
var
´´ 
updated
´´ 
=
´´ 
await
´´ #
_repo
´´$ )
.
´´) *#
GetByIdIncludingAsync
´´* ?
(
´´? @
id
´´@ B
,
´´B C
a
´´D E
=>
´´F H
a
´´I J
.
´´J K
Vehicle
´´K R
,
´´R S
a
´´T U
=>
´´V X
a
´´Y Z
.
´´Z [

ParkingLot
´´[ e
)
´´e f
;
´´f g
return
¨¨ 
_mapper
¨¨ 
.
¨¨ 
Map
¨¨ "
<
¨¨" #&
ParkingAllocationReadDto
¨¨# ;
>
¨¨; <
(
¨¨< =
updated
¨¨= D
)
¨¨D E
;
¨¨E F
}
≠≠ 
catch
ÆÆ 
(
ÆÆ 
	Exception
ÆÆ 
ex
ÆÆ 
)
ÆÆ  
{
ØØ 
Log
∞∞ 
.
∞∞ 
Error
∞∞ 
(
∞∞ 
ex
∞∞ 
,
∞∞ 
$str
∞∞ A
,
∞∞A B
id
∞∞C E
)
∞∞E F
;
∞∞F G
throw
±± 
;
±± 
}
≤≤ 
}
≥≥ 	
public
µµ 
async
µµ 
Task
µµ 
<
µµ 
bool
µµ 
>
µµ 
DeleteAsync
µµ  +
(
µµ+ ,
int
µµ, /
id
µµ0 2
)
µµ2 3
{
∂∂ 	
try
∑∑ 
{
∏∏ 
var
ππ 
existing
ππ 
=
ππ 
await
ππ $
_repo
ππ% *
.
ππ* +#
GetByIdIncludingAsync
ππ+ @
(
ππ@ A
id
ππA C
,
ππC D
a
ππE F
=>
ππG I
a
ππJ K
.
ππK L
Vehicle
ππL S
,
ππS T
a
ππU V
=>
ππW Y
a
ππZ [
.
ππ[ \

ParkingLot
ππ\ f
)
ππf g
;
ππg h
if
∫∫ 
(
∫∫ 
existing
∫∫ 
==
∫∫ 
null
∫∫  $
)
∫∫$ %
return
∫∫& ,
false
∫∫- 2
;
∫∫2 3
await
ºº 
_repo
ºº 
.
ºº 
DeleteAsync
ºº '
(
ºº' (
id
ºº( *
)
ºº* +
;
ºº+ ,
return
ΩΩ 
true
ΩΩ 
;
ΩΩ 
}
ææ 
catch
øø 
(
øø 
	Exception
øø 
ex
øø 
)
øø  
{
¿¿ 
Log
¡¡ 
.
¡¡ 
Error
¡¡ 
(
¡¡ 
ex
¡¡ 
,
¡¡ 
$str
¡¡ A
,
¡¡A B
id
¡¡C E
)
¡¡E F
;
¡¡F G
throw
¬¬ 
;
¬¬ 
}
√√ 
}
ƒƒ 	
}
≈≈ 
}∆∆ ”
QC:\ParkingLotAllocationSystem\BackendProject\Service\Implementation\JwtService.cs
	namespace

 	
BackendProject


 
.

 
Service

  
.

  !
Implementation

! /
{ 
public 

class 

JwtService 
: 
IJwtService )
{ 
private 
readonly 
JwtSettings $
	_settings% .
;. /
public 

JwtService 
( 
IOptions "
<" #
JwtSettings# .
>. /
options0 7
)7 8
{ 	
	_settings 
= 
options 
.  
Value  %
;% &
} 	
public 
string 
GenerateToken #
(# $
User$ (
user) -
)- .
{ 	
var 
claims 
= 
new 
[ 
] 
{ 
new 
Claim 
( #
JwtRegisteredClaimNames -
.- .
Sub. 1
,1 2
user3 7
.7 8
UserId8 >
.> ?
ToString? G
(G H
)H I
)I J
,J K
new 
Claim 
( 

ClaimTypes  
.  !
Name! %
,% &
user' +
.+ ,
FullName, 4
)4 5
,5 6
new 
Claim 
( 

ClaimTypes  
.  !
Email! &
,& '
user( ,
., -
Email- 2
)2 3
,3 4
new 
Claim 
( 

ClaimTypes  
.  !
Role! %
,% &
user' +
.+ ,
Role, 0
??0 2
$str3 9
)9 :
} 	
;	 

var 
key 
= 
new  
SymmetricSecurityKey .
(. /
Encoding/ 7
.7 8
UTF88 <
.< =
GetBytes= E
(E F
	_settingsF O
.O P
	SecretKeyP Y
)Y Z
)Z [
;[ \
var   
creds   
=   
new   
SigningCredentials   .
(  . /
key  / 2
,  2 3
SecurityAlgorithms  4 F
.  F G

HmacSha256  G Q
)  Q R
;  R S
var!! 
token!! 
=!! 
new!! 
JwtSecurityToken!! ,
(!!, -
issuer"" 
:"" 
	_settings"" !
.""! "
Issuer""" (
,""( )
audience## 
:## 
	_settings## #
.### $
Audience##$ ,
,##, -
claims$$ 
:$$ 
claims$$ 
,$$ 
expires%% 
:%% 
DateTime%% !
.%%! "
UtcNow%%" (
.%%( )

AddMinutes%%) 3
(%%3 4
	_settings%%4 =
.%%= >
ExpiryMinutes%%> K
)%%K L
,%%L M
signingCredentials&& "
:&&" #
creds&&$ )
)&&) *
;&&* +
return(( 
new(( #
JwtSecurityTokenHandler(( .
(((. /
)((/ 0
.((0 1

WriteToken((1 ;
(((; <
token((< A
)((A B
;((B C
})) 	
}** 
},, ê3
7C:\ParkingLotAllocationSystem\BackendProject\Seeding.cs
	namespace 	
BackendProject
 
{ 
public 

class 
Seeding 
{		 
private

 
readonly

 
AppDbContext

 %
_context

& .
;

. /
public 
Seeding 
( 
AppDbContext #
context$ +
)+ ,
{ 	
_context 
= 
context 
; 
} 	
public 
void 
Seed 
( 
) 
{ 	
if 
( 
! 
_context 
. 
Users 
.  
Any  #
(# $
)$ %
)% &
{ 
_context 
. 
Users 
. 
AddRange '
(' (
new( +
User, 0
{ 
Email 
= 
$str -
,- .
FullName 
= 
$str 3
,3 4
MobileNumber  
=! "
$str# /
,/ 0
PasswordHash  
=! "
BCrypt# )
.) *
Net* -
.- .
BCrypt. 4
.4 5
HashPassword5 A
(A B
$strB M
)M N
,N O
Role 
= 
$str "
} 
, 
new 
User 
{ 
Email 
= 
$str /
,/ 0
FullName   
=   
$str   /
,  / 0
MobileNumber!!  
=!!! "
$str!!# /
,!!/ 0
PasswordHash""  
=""! "
BCrypt""# )
."") *
Net""* -
.""- .
BCrypt"". 4
.""4 5
HashPassword""5 A
(""A B
$str""B M
)""M N
,""N O
Role## 
=## 
$str## !
}$$ 
,$$ 
new%% 
User%% 
{&& 
Email'' 
='' 
$str'' 4
,''4 5
FullName(( 
=(( 
$str(( .
,((. /
MobileNumber))  
=))! "
$str))# /
,))/ 0
PasswordHash**  
=**! "
BCrypt**# )
.**) *
Net*** -
.**- .
BCrypt**. 4
.**4 5
HashPassword**5 A
(**A B
$str**B M
)**M N
,**N O
Role++ 
=++ 
$str++ !
},, 
).. 
;.. 
}00 
if33 
(33 
!33 
_context33 
.33 
ParkingLots33 %
.33% &
Any33& )
(33) *
)33* +
)33+ ,
{44 
var55 
lots55 
=55 
new55 
List55 #
<55# $

ParkingLot55$ .
>55. /
(55/ 0
)550 1
;551 2
for66 
(66 
char66 
section66 !
=66" #
$char66$ '
;66' (
section66) 0
<=661 3
$char664 7
;667 8
section669 @
++66@ B
)66B C
{77 
for88 
(88 
int88 
number88 #
=88$ %
$num88& '
;88' (
number88) /
<=880 2
$num883 5
;885 6
number887 =
++88= ?
)88? @
{99 
lots:: 
.:: 
Add::  
(::  !
new::! $

ParkingLot::% /
{;; 
	LotNumber<< %
=<<& '
$"<<( *
{<<* +
section<<+ 2
}<<2 3
{<<3 4
number<<4 :
:<<: ;
$str<<; =
}<<= >
"<<> ?
,<<? @
Location== $
===% &
section==' .
<===/ 1
$char==2 5
?==6 7
$str==8 F
:==G H
$str==I V
,==V W
}>> 
)>> 
;>> 
}?? 
}@@ 
_contextAA 
.AA 
ParkingLotsAA $
.AA$ %
AddRangeAA% -
(AA- .
lotsAA. 2
)AA2 3
;AA3 4
}BB 
ifCC 
(CC 
!CC 
_contextCC 
.CC 
VehiclesCC "
.CC" #
AnyCC# &
(CC& '
)CC' (
)CC( )
{DD 
_contextEE 
.EE 
VehiclesEE !
.EE! "
AddRangeEE" *
(EE* +
newEE+ .
VehicleEE/ 6
{FF 
TypeGG 
=GG 
$strGG  
,GG  !
NumberPlateHH 
=HH  !
$strHH" -
,HH- .
MakeII 
=II 
$strII %
,II% &
ColorJJ 
=JJ 
$strJJ #
,JJ# $
UserIdKK 
=KK 
$numKK 
}LL 
,LL 
newMM 
VehicleMM 
{NN 
TypeOO 
=OO 
$strOO !
,OO! "
NumberPlatePP 
=PP  !
$strPP" .
,PP. /
MakeQQ 
=QQ 
$strQQ "
,QQ" #
ColorRR 
=RR 
$strRR !
,RR! "
UserIdSS 
=SS 
$numSS 
}TT 
)UU 
;UU 
}VV 
ifWW 
(WW 
!WW 
_contextWW 
.WW 
ParkingAllocationsWW ,
.WW, -
AnyWW- 0
(WW0 1
)WW1 2
)WW2 3
{XX 
_contextYY 
.YY 
ParkingAllocationsYY +
.YY+ ,
AddYY, /
(YY/ 0
newYY0 3
ParkingAllocationYY4 E
{ZZ 
	VehicleId[[ 
=[[ 
$num[[  !
,[[! "
ParkingLotId\\  
=\\! "
$num\\# $
,\\$ %
AllocatedFromDate]] %
=]]& '
DateTime]]( 0
.]]0 1
Now]]1 4
,]]4 5
AllocatedUptoDate^^ %
=^^& '
DateTime^^( 0
.^^0 1
Now^^1 4
.^^4 5
AddDays^^5 <
(^^< =
$num^^= >
)^^> ?
,^^? @
}__ 
)`` 
;`` 
}aa 
_contextbb 
.bb 
SaveChangesbb  
(bb  !
)bb! "
;bb" #
}cc 	
}dd 
}ee ÷

LC:\ParkingLotAllocationSystem\BackendProject\Repository\VehicleRepository.cs
	namespace 	
BackendProject
 
. 

Repository #
{ 
public 

class 
VehicleRepository "
:# $
IvehicleRepository% 7
{ 
private		 
readonly		 
AppDbContext		 %
_context		& .
;		. /
public

 
VehicleRepository

  
(

  !
AppDbContext

! -
context

. 5
)

5 6
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
Vehicle !
>! "#
GetVehicleWithUserAsync# :
(: ;
int; >
id? A
)A B
{ 	
return 
await 
_context !
.! "
Vehicles" *
. 
Include 
( 
v 
=> 
v 
.  
User  $
)$ %
. 
FirstOrDefaultAsync $
($ %
v% &
=>' )
v* +
.+ ,
	VehicleId, 5
==6 8
id9 ;
); <
;< =
} 	
} 
} Á
OC:\ParkingLotAllocationSystem\BackendProject\Repository\ParkingLotRepository.cs
	namespace 	
BackendProject
 
. 

Repository #
{ 
public 

class  
ParkingLotRepository %
:& '!
IParkingLotRepository( =
{ 
private		 
readonly		 
AppDbContext		 %
_context		& .
;		. /
public  
ParkingLotRepository #
(# $
AppDbContext$ 0
context1 8
)8 9
{ 	
_context 
= 
context 
; 
} 	
public 

IQueryable 
< 
ParkingAllocation +
>+ ,
Allocations- 8
=>9 ;
_context< D
.D E
ParkingAllocationsE W
;W X
public 

IQueryable 
< 

ParkingLot $
>$ %
Lots& *
=>+ -
_context. 6
.6 7
ParkingLots7 B
;B C
} 
} ‚
MC:\ParkingLotAllocationSystem\BackendProject\Repository\IvehicleRepository.cs
	namespace 	
BackendProject
 
. 

Repository #
{ 
public 

	interface 
IvehicleRepository '
{ 
Task 
< 
Vehicle 
> #
GetVehicleWithUserAsync -
(- .
int. 1
id2 4
)4 5
;5 6
}		 
}

 ˙
PC:\ParkingLotAllocationSystem\BackendProject\Repository\IParkingLotRepository.cs
	namespace 	
BackendProject
 
. 

Repository #
{ 
public 

	interface !
IParkingLotRepository *
{ 

IQueryable 
< 
ParkingAllocation $
>$ %
Allocations& 1
{2 3
get4 7
;7 8
}9 :

IQueryable 
< 

ParkingLot 
> 
Lots #
{$ %
get& )
;) *
}+ ,
}		 
} €
MC:\ParkingLotAllocationSystem\BackendProject\Repository\IGenericRepository.cs
	namespace 	
BackendProject
 
. 

Repository #
{ 
public 

	interface 
IGenericRepository '
<' (
T( )
>) *
where+ 0
T1 2
:3 4
class5 :
{ 
Task 
< 
IEnumerable 
< 
T 
> 
> 
GetAllAsync (
(( )
)) *
;* +
Task		 
<		 
IEnumerable		 
<		 
T		 
>		 
>		  
GetAllIncludingAsync		 1
(		1 2
params		2 8

Expression		9 C
<		C D
Func		D H
<		H I
T		I J
,		J K
object		L R
>		R S
>		S T
[		T U
]		U V
includes		W _
)		_ `
;		` a
Task

 
<

 
T

 
>

 !
GetByIdIncludingAsync

 %
(

% &
int

& )
id

* ,
,

, -
params

. 4

Expression

5 ?
<

? @
Func

@ D
<

D E
T

E F
,

F G
object

H N
>

N O
>

O P
[

P Q
]

Q R
includes

S [
)

[ \
;

\ ]
Task 
< 
T 
> 
GetByIdAsync 
( 
int  
id! #
)# $
;$ %
Task 
< 
T 
> 
AddAsync 
( 
T 
entity !
)! "
;" #
Task 
UpdateAsync 
( 
T 
entity !
)! "
;" #
Task 
DeleteAsync 
( 
int 
id 
)  
;  !
} 
} ¡/
LC:\ParkingLotAllocationSystem\BackendProject\Repository\GenericRepository.cs
	namespace 	
BackendProject
 
. 

Repository #
{ 
public 

class 
GenericRepository "
<" #
T# $
>$ %
:% &
IGenericRepository& 8
<8 9
T9 :
>: ;
where< A
TB C
:D E
classF K
{		 
private

 
readonly

 
AppDbContext

 %
_context

& .
;

. /
private 
readonly 
DbSet 
< 
T  
>  !
_dbSet" (
;( )
public 
GenericRepository  
(  !
AppDbContext! -
context. 5
)5 6
{ 	
_context 
= 
context 
; 
_dbSet 
= 
_context 
. 
Set !
<! "
T" #
># $
($ %
)% &
;& '
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
T& '
>' (
>( )
GetAllAsync* 5
(5 6
)6 7
=>8 :
await; @
_dbSetA G
.G H
ToListAsyncH S
(S T
)T U
;U V
public 
async 
Task 
< 
T 
> 
GetByIdAsync )
() *
int* -
id. 0
)0 1
=>2 4
await5 :
_dbSet; A
.A B
	FindAsyncB K
(K L
idL N
)N O
;O P
public 
async 
Task 
< 
T 
> 
AddAsync %
(% &
T& '
entity( .
). /
{ 	
await 
_dbSet 
. 
AddAsync !
(! "
entity" (
)( )
;) *
await 
_context 
. 
SaveChangesAsync +
(+ ,
), -
;- .
return 
entity 
; 
} 	
public 
async 
Task 
UpdateAsync %
(% &
T& '
entity( .
). /
{ 	
_dbSet 
. 
Update 
( 
entity  
)  !
;! "
await   
_context   
.   
SaveChangesAsync   +
(  + ,
)  , -
;  - .
}!! 	
public## 
async## 
Task## 
DeleteAsync## %
(##% &
int##& )
id##* ,
)##, -
{$$ 	
var%% 
entity%% 
=%% 
await%% 
GetByIdAsync%% +
(%%+ ,
id%%, .
)%%. /
;%%/ 0
if&& 
(&& 
entity&& 
==&& 
null&& 
)&& 
return&&  &
;&&& '
else(( 
{)) 
_dbSet** 
.** 
Remove** 
(** 
entity** $
)**$ %
;**% &
}++ 
await-- 
_context-- 
.-- 
SaveChangesAsync-- +
(--+ ,
)--, -
;--- .
}.. 	
public// 
async// 
Task// 
<// 
IEnumerable// %
<//% &
T//& '
>//' (
>//( ) 
GetAllIncludingAsync//* >
(//> ?
params//? E

Expression//F P
<//P Q
Func//Q U
<//U V
T//V W
,//W X
object//Y _
>//_ `
>//` a
[//a b
]//b c
includes//d l
)//l m
{00 	

IQueryable11 
<11 
T11 
>11 
query11 
=11  !
_dbSet11" (
;11( )
foreach22 
(22 
var22 
include22  
in22! #
includes22$ ,
)22, -
{33 
query44 
=44 
query44 
.44 
Include44 %
(44% &
include44& -
)44- .
;44. /
}55 
return77 
await77 
query77 
.77 
ToListAsync77 *
(77* +
)77+ ,
;77, -
}88 	
public99 
async99 
Task99 
<99 
T99 
>99 !
GetByIdIncludingAsync99 2
(992 3
int993 6
id997 9
,999 :
params99; A

Expression99B L
<99L M
Func99M Q
<99Q R
T99R S
,99S T
object99U [
>99[ \
>99\ ]
[99] ^
]99^ _
includes99` h
)99h i
{:: 	

IQueryable;; 
<;; 
T;; 
>;; 
query;; 
=;;  !
_context;;" *
.;;* +
Set;;+ .
<;;. /
T;;/ 0
>;;0 1
(;;1 2
);;2 3
;;;3 4
foreach== 
(== 
var== 
include==  
in==! #
includes==$ ,
)==, -
{>> 
query?? 
=?? 
query?? 
.?? 
Include?? %
(??% &
include??& -
)??- .
;??. /
}@@ 
returnBB 
awaitBB 
queryBB 
.BB 
FirstOrDefaultAsyncBB 2
(BB2 3
eBB3 4
=>BB5 7
EFBB8 :
.BB: ;
PropertyBB; C
<BBC D
intBBD G
>BBG H
(BBH I
eBBI J
,BBJ K
$strBBL Z
)BBZ [
==BB\ ^
idBB_ a
)BBa b
;BBb c
}CC 	
}DD 
}EE á]
7C:\ParkingLotAllocationSystem\BackendProject\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
Environment 
. "
SetEnvironmentVariable "
(" #
$str# 4
,4 5
$str6 <
)< =
;= >
builder 
. 
Configuration 
. 
SetBasePath !
(! "
	Directory" +
.+ ,
GetCurrentDirectory, ?
(? @
)@ A
)A B
.B C
AddJsonFileC N
(N O
$strO a
,a b
optionalc k
:k l
falsem r
,r s
reloadOnChange	t Ç
:
Ç É
false
Ñ â
)
â ä
.
ä ã
AddJsonFile
ã ñ
(
ñ ó
$"
ó ô
$str
ô •
{
• ¶
builder
¶ ≠
.
≠ Æ
Environment
Æ π
.
π ∫
EnvironmentName
∫ …
}
…  
$str
  œ
"
œ –
,
– —
optional
“ ⁄
:
⁄ €
true
‹ ‡
)
‡ ·
.
· ‚%
AddEnvironmentVariables
‚ ˘
(
˘ ˙
)
˙ ˚
;
˚ ¸
Console 
. 
	WriteLine 
( 
builder 
. 
Environment %
.% &
EnvironmentName& 5
)5 6
;6 7
builder 
. 
Services 
. 
AddCors 
( 
options  
=>! #
options$ +
.+ ,
	AddPolicy, 5
(5 6
$str6 @
,@ A
policyB H
=>I K
policyL R
.R S
WithOriginsS ^
(^ _
$str_ v
)v w
.w x
AllowAnyMethod	x Ü
(
Ü á
)
á à
.
à â
AllowAnyHeader
â ó
(
ó ò
)
ò ô
.
ô ö
AllowCredentials
ö ™
(
™ ´
)
´ ¨
)
¨ ≠
)
≠ Æ
;
Æ Ø
builder 
. 
Host 
. 

UseSerilog 
( 
( 
context  
,  !
services" *
,* +
configuration, 9
)9 :
=>; =
configuration> K
. 
ReadFrom 
. 
Configuration 
( 
context #
.# $
Configuration$ 1
)1 2
. 
Enrich 
. 
FromLogContext 
( 
) 
) 
; 
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
if"" 
("" 
Environment"" 
."" "
GetEnvironmentVariable"" &
(""& '
$str""' 8
)""8 9
=="": <
$str""= D
)""D E
{## 
Console$$ 
.$$ 
	WriteLine$$ 
($$ 
$str$$ /
)$$/ 0
;$$0 1
builder%% 
.%% 
Services%% 
.%% 
AddDbContext%% !
<%%! "
AppDbContext%%" .
>%%. /
(%%/ 0
options%%0 7
=>%%8 :
options&& 
.&& 
UseInMemoryDatabase&& #
(&&# $
$str&&$ 2
)&&2 3
)&&3 4
;&&4 5
}'' 
else(( 
{)) 
Console** 
.** 
	WriteLine** 
(** 
$str** 1
)**1 2
;**2 3
builder++ 
.++ 
Services++ 
.++ 
AddDbContext++ !
<++! "
AppDbContext++" .
>++. /
(++/ 0
options++0 7
=>++8 :
options,, 
.,, 
UseSqlServer,, 
(,, 
builder,, $
.,,$ %
Configuration,,% 2
.,,2 3
GetConnectionString,,3 F
(,,F G
$str,,G Z
),,Z [
),,[ \
),,\ ]
;,,] ^
}-- 
var// 
connStr// 
=// 
builder// 
.// 
Configuration// #
.//# $
GetConnectionString//$ 7
(//7 8
$str//8 K
)//K L
;//L M
Console00 
.00 
	WriteLine00 
(00 
$"00 
$str00 -
{00- .
connStr00. 5
}005 6
"006 7
)007 8
;008 9
builder22 
.22 
Services22 
.22 
	AddScoped22 
(22 
typeof22 !
(22! "
IGenericRepository22" 4
<224 5
>225 6
)226 7
,227 8
typeof229 ?
(22? @
GenericRepository22@ Q
<22Q R
>22R S
)22S T
)22T U
;22U V
builder33 
.33 
Services33 
.33 
	AddScoped33 
<33 
IJwtService33 &
,33& '

JwtService33( 2
>332 3
(333 4
)334 5
;335 6
builder44 
.44 
Services44 
.44 
	AddScoped44 
<44 
IUserService44 '
,44' (
UserService44) 4
>444 5
(445 6
)446 7
;447 8
builder55 
.55 
Services55 
.55 
	AddScoped55 
<55 
IVehicleService55 *
,55* +
VehicleService55, :
>55: ;
(55; <
)55< =
;55= >
builder66 
.66 
Services66 
.66 
	AddScoped66 
<66 
IParkingLotService66 -
,66- .
ParkingLotService66. ?
>66? @
(66@ A
)66A B
;66B C
builder77 
.77 
Services77 
.77 
	AddScoped77 
<77 %
IParkingAllocationService77 4
,774 5$
ParkingAllocationService776 N
>77N O
(77O P
)77P Q
;77Q R
builder88 
.88 
Services88 
.88 
	AddScoped88 
<88 !
IParkingLotRepository88 0
,880 1 
ParkingLotRepository882 F
>88F G
(88G H
)88H I
;88I J
builder99 
.99 
Services99 
.99 
	AddScoped99 
<99 
IvehicleRepository99 -
,99- .
VehicleRepository99/ @
>99@ A
(99A B
)99B C
;99C D
builder<< 
.<< 
Services<< 
.<< 
AddAutoMapper<< 
(<< 
typeof<< %
(<<% &
Program<<& -
)<<- .
)<<. /
;<</ 0
builder>> 
.>> 
Services>> 
.>> 
	Configure>> 
<>> 
JwtSettings>> &
>>>& '
(>>' (
builder>>( /
.>>/ 0
Configuration>>0 =
.>>= >

GetSection>>> H
(>>H I
$str>>I V
)>>V W
)>>W X
;>>X Y
builder?? 
.?? 
Services?? 
.?? 
AddAuthentication?? "
(??" #
$str??# +
)??+ ,
.@@ 
AddJwtBearer@@ 
(@@ 
$str@@ 
,@@ 
options@@ #
=>@@$ &
{AA 
varBB 
settingsBB 
=BB 
builderBB 
.BB 
ConfigurationBB ,
.BB, -

GetSectionBB- 7
(BB7 8
$strBB8 E
)BBE F
.BBF G
GetBBG J
<BBJ K
JwtSettingsBBK V
>BBV W
(BBW X
)BBX Y
;BBY Z
optionsCC 
.CC %
TokenValidationParametersCC )
=CC* +
newCC, /%
TokenValidationParametersCC0 I
{DD 	
ValidateIssuerFF 
=FF 
trueFF !
,FF! "
ValidateAudienceGG 
=GG 
trueGG #
,GG# $
ValidateLifetimeHH 
=HH 
trueHH #
,HH# $$
ValidateIssuerSigningKeyII $
=II% &
trueII' +
,II+ ,
ValidIssuerJJ 
=JJ 
settingsJJ "
.JJ" #
IssuerJJ# )
,JJ) *
ValidAudienceKK 
=KK 
settingsKK $
.KK$ %
AudienceKK% -
,KK- .
IssuerSigningKeyLL 
=LL 
newLL " 
SymmetricSecurityKeyLL# 7
(LL7 8
EncodingLL8 @
.LL@ A
UTF8LLA E
.LLE F
GetBytesLLF N
(LLN O
settingsLLO W
.LLW X
	SecretKeyLLX a
)LLa b
)LLb c
}MM 	
;MM	 

}NN 
)NN 
;NN 
builderOO 
.OO 
ServicesOO 
.OO 
AddAuthorizationOO !
(OO! "
)OO" #
;OO# $
varSS 
appSS 
=SS 	
builderSS
 
.SS 
BuildSS 
(SS 
)SS 
;SS 
ifTT 
(TT 
EnvironmentTT 
.TT "
GetEnvironmentVariableTT &
(TT& '
$strTT' 8
)TT8 9
==TT: <
$strTT= D
)TTD E
{UU 
usingVV 	
(VV
 
varVV 
scopeVV 
=VV 
appVV 
.VV 
ServicesVV #
.VV# $
CreateScopeVV$ /
(VV/ 0
)VV0 1
)VV1 2
{WW 
varXX 
servicesXX 
=XX 
scopeXX 
.XX 
ServiceProviderXX ,
;XX, -
varYY 
	dbContextYY 
=YY 
servicesYY  
.YY  !
GetRequiredServiceYY! 3
<YY3 4
AppDbContextYY4 @
>YY@ A
(YYA B
)YYB C
;YYC D
varZZ 
seederZZ 
=ZZ 
newZZ 
SeedingZZ  
(ZZ  !
	dbContextZZ! *
)ZZ* +
;ZZ+ ,
seeder[[ 
.[[ 
Seed[[ 
([[ 
)[[ 
;[[ 
}\\ 
}]] 
if`` 
(`` 
app`` 
.`` 
Environment`` 
.`` 
IsDevelopment`` !
(``! "
)``" #
||``$ &
app``' *
.``* +
Environment``+ 6
.``6 7
EnvironmentName``7 F
==``F H
$str``H N
)``N O
{aa 
appbb 
.bb 

UseSwaggerbb 
(bb 
)bb 
;bb 
appcc 
.cc 
UseSwaggerUIcc 
(cc 
)cc 
;cc 
}dd 
appff 
.ff 
UseHttpsRedirectionff 
(ff 
)ff 
;ff 
appgg 
.gg 
UseCorsgg 
(gg 
$strgg 
)gg 
;gg 
apphh 
.hh 
UseAuthorizationhh 
(hh 
)hh 
;hh 
appjj 
.jj 
MapControllersjj 
(jj 
)jj 
;jj 
appll 
.ll 
Runll 
(ll 
)ll 	
;ll	 
ï
=C:\ParkingLotAllocationSystem\BackendProject\Model\Vehicle.cs
	namespace 	
BackendProject
 
. 
Model 
{ 
public 

class 
Vehicle 
{ 
[ 	
Key	 
] 
public		 
int		 
	VehicleId		 
{		 
get		 "
;		" #
set		$ '
;		' (
}		) *
[ 	
Required	 
] 
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
Required	 
] 
public 
string 
NumberPlate !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Required	 
] 
public 
string 
Make 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Color 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
public 
User 
User 
{ 
get 
; 
set  #
;# $
}% &
public 
ICollection 
< 
ParkingAllocation ,
>, -
Allocations. 9
{: ;
get< ?
;? @
setA D
;D E
}F G
} 
} Á
:C:\ParkingLotAllocationSystem\BackendProject\Model\User.cs
	namespace 	
BackendProject
 
. 
Model 
{ 
public 

class 
User 
{ 
[ 	
Key	 
] 
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
[

 	
Required

	 
]

 
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
EmailAddress	 
] 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
public 
string 
PasswordHash "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Role 
{ 
get  
;  !
set" %
;% &
}' (
=) *
$str+ 1
;1 2
[ 	
Required	 
] 
[ 	
Phone	 
] 
public 
string 
? 
MobileNumber #
{$ %
get& )
;) *
set* -
;- .
}/ 0
public 
Vehicle 
Vehicle 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ¶
@C:\ParkingLotAllocationSystem\BackendProject\Model\ParkingLot.cs
	namespace 	
BackendProject
 
. 
Model 
{ 
public 

class 

ParkingLot 
{ 
[ 	
Key	 
] 
public 
int 
ParkingLotId 
{  !
get" %
;% &
set' *
;* +
}, -
[

 	
Required

	 
]

 
public 
string 
	LotNumber 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Location 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
ICollection 
< 
ParkingAllocation ,
>, -
Allocations. 9
{: ;
get< ?
;? @
setA D
;D E
}F G
} 
} Ö
GC:\ParkingLotAllocationSystem\BackendProject\Model\ParkingAllocation.cs
	namespace 	
BackendProject
 
. 
Model 
{ 
public 

class 
ParkingAllocation "
{ 
[ 	
Key	 
] 
public		 
int		 
AllocationId		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
[ 	
Required	 
] 
public 
int 
	VehicleId 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
Required	 
] 
public 
int 
ParkingLotId 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Required	 
] 
public 
DateTime 
AllocatedFromDate )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
[ 	
Required	 
] 
public 
DateTime 
AllocatedUptoDate )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
int 
AllocatedDays  
=>! #
($ %
AllocatedUptoDate% 6
-7 8
AllocatedFromDate9 J
)J K
.K L
DaysL P
+P Q
$numQ R
;R S
public 
Vehicle 
Vehicle 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

ParkingLot 

ParkingLot $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} é!
OC:\ParkingLotAllocationSystem\BackendProject\Migrations\20250801071155_Added.cs
	namespace 	
BackendProject
 
. 

Migrations #
{ 
public 

partial 
class 
Added 
:  
	Migration! *
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str !
,! "
table 
: 
$str !
)! "
;" #
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str !
,! "
table 
: 
$str 
) 
;  
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str !
,! "
table 
: 
$str $
)$ %
;% &
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str !
,! "
table 
: 
$str +
)+ ,
;, -
migrationBuilder 
. 
RenameIndex (
(( )
name 
: 
$str -
,- .
table 
: 
$str 
, 
newName   
:   
$str   *
)  * +
;  + ,
}!! 	
	protected$$ 
override$$ 
void$$ 
Down$$  $
($$$ %
MigrationBuilder$$% 5
migrationBuilder$$6 F
)$$F G
{%% 	
migrationBuilder&& 
.&& 
RenameIndex&& (
(&&( )
name'' 
:'' 
$str'' '
,''' (
table(( 
:(( 
$str(( 
,(( 
newName)) 
:)) 
$str)) 0
)))0 1
;))1 2
migrationBuilder++ 
.++ 
	AddColumn++ &
<++& '
bool++' +
>+++ ,
(++, -
name,, 
:,, 
$str,, !
,,,! "
table-- 
:-- 
$str-- !
,--! "
type.. 
:.. 
$str.. 
,.. 
nullable// 
:// 
false// 
,//  
defaultValue00 
:00 
false00 #
)00# $
;00$ %
migrationBuilder22 
.22 
	AddColumn22 &
<22& '
bool22' +
>22+ ,
(22, -
name33 
:33 
$str33 !
,33! "
table44 
:44 
$str44 
,44 
type55 
:55 
$str55 
,55 
nullable66 
:66 
false66 
,66  
defaultValue77 
:77 
false77 #
)77# $
;77$ %
migrationBuilder99 
.99 
	AddColumn99 &
<99& '
bool99' +
>99+ ,
(99, -
name:: 
::: 
$str:: !
,::! "
table;; 
:;; 
$str;; $
,;;$ %
type<< 
:<< 
$str<< 
,<< 
nullable== 
:== 
false== 
,==  
defaultValue>> 
:>> 
false>> #
)>># $
;>>$ %
migrationBuilder@@ 
.@@ 
	AddColumn@@ &
<@@& '
bool@@' +
>@@+ ,
(@@, -
nameAA 
:AA 
$strAA !
,AA! "
tableBB 
:BB 
$strBB +
,BB+ ,
typeCC 
:CC 
$strCC 
,CC 
nullableDD 
:DD 
falseDD 
,DD  
defaultValueEE 
:EE 
falseEE #
)EE# $
;EE$ %
}FF 	
}GG 
}HH ˘8
FC:\ParkingLotAllocationSystem\BackendProject\Mapping\MappingProfile.cs
	namespace 	
BackendProject
 
. 
Mapping  
{ 
public 

class 
MappingProfile 
:  
Profile! (
{		 
public

 
MappingProfile

 
(

 
)

 
{ 	
	CreateMap 
< 
User 
, 
UserReadDto '
>' (
(( )
)) *
;* +
	CreateMap 
< 
RegisterDto !
,! "
User# '
>' (
(( )
)) *
.* +
	ForMember+ 4
(4 5
dest5 9
=>: <
dest= A
.A B
PasswordHashB N
,N O
optP S
=>T V
optW Z
.Z [
Ignore[ a
(a b
)b c
)c d
;d e
	CreateMap 
< 
Vehicle 
, 
VehicleReadDto -
>- .
(. /
)/ 0
. 
	ForMember 
( 
dest 
=>  "
dest# '
.' (
UserName( 0
,0 1
opt2 5
=>6 8
opt9 <
.< =
MapFrom= D
(D E
srcE H
=>I K
srcL O
.O P
UserP T
.T U
FullNameU ]
)] ^
)^ _
;_ `
	CreateMap 
< 
VehicleCreateDto &
,& '
Vehicle( /
>/ 0
(0 1
)1 2
;2 3
	CreateMap 
< 
VehicleUpdateDto &
,& '
Vehicle( /
>/ 0
(0 1
)1 2
;2 3
	CreateMap 
< 

ParkingLot  
,  !
ParkingLotReadDto" 3
>3 4
(4 5
)5 6
;6 7
	CreateMap 
< 
ParkingLotCreateDto )
,) *

ParkingLot+ 5
>5 6
(6 7
)7 8
;8 9
	CreateMap 
< 
ParkingLotUpdateDto )
,) *

ParkingLot+ 5
>5 6
(6 7
)7 8
;8 9
	CreateMap 
< 
ParkingAllocation '
,' ($
ParkingAllocationReadDto) A
>A B
(B C
)C D
. 
	ForMember 
( 
dest 
=> 
dest 
. 
AllocatedFromDate .
,. /
opt	 
=> 
opt 
. 
MapFrom 
( 
src 
=>  "
DateOnly# +
.+ ,
FromDateTime, 8
(8 9
src9 <
.< =
AllocatedFromDate= N
)N O
)O P
)P Q
. 
	ForMember 
( 
dest 
=> 
dest 
. 
AllocatedUptoDate .
,. /
opt	 
=> 
opt 
. 
MapFrom 
( 
src 
=>  "
DateOnly# +
.+ ,
FromDateTime, 8
(8 9
src9 <
.< =
AllocatedUptoDate= N
)N O
)O P
)P Q
. 
	ForMember 
( 
dest 
=> 
dest 
. 
NumberPlate (
,( )
opt* -
=>. 0
opt1 4
.4 5
MapFrom5 <
(< =
src= @
=>A C
srcD G
.G H
VehicleH O
.O P
NumberPlateP [
)[ \
)\ ]
. 
	ForMember 
( 
dest 
=> 
dest 
. 
	LotNumber &
,& '
opt( +
=>, .
opt/ 2
.2 3
MapFrom3 :
(: ;
src; >
=>? A
srcB E
.E F

ParkingLotF P
.P Q
	LotNumberQ Z
)Z [
)[ \
. 
	ForMember 
( 
dest 
=> 
dest 
. 
LotLocation (
,( )
opt* -
=>. 0
opt1 4
.4 5
MapFrom5 <
(< =
src= @
=>A C
srcD G
.G H

ParkingLotH R
.R S
LocationS [
)[ \
)\ ]
;] ^
	CreateMap   
<   &
ParkingAllocationCreateDto   0
,  0 1
ParkingAllocation  2 C
>  C D
(  D E
)  E F
.!! 
	ForMember!! 
(!! 
dest!! 
=>!! 
dest!! 
.!! 
AllocatedFromDate!! -
,!!- .
opt"" 
=>"" 
opt"" 
."" 
MapFrom"" 
("" 
src"" 
=>"" !
src""" %
.""% &
AllocatedFromDate""& 7
.""7 8

ToDateTime""8 B
(""B C
TimeOnly""C K
.""K L
MinValue""L T
)""T U
)""U V
)""V W
.## 
	ForMember## 
(## 
dest## 
=>## 
dest## 
.## 
AllocatedUptoDate## -
,##- .
opt$$ 
=>$$ 
opt$$ 
.$$ 
MapFrom$$ 
($$ 
src$$ 
=>$$ !
src$$" %
.$$% &
AllocatedUptoDate$$& 7
.$$7 8

ToDateTime$$8 B
($$B C
TimeOnly$$C K
.$$K L
MaxValue$$L T
)$$T U
)$$U V
)$$V W
;$$W X
	CreateMap&& 
<&& &
ParkingAllocationUpdateDto&& 0
,&&0 1
ParkingAllocation&&2 C
>&&C D
(&&D E
)&&E F
.'' 
	ForMember'' 
('' 
dest'' 
=>''  "
dest''# '
.''' (
AllocatedFromDate''( 9
,''9 :
opt(( 
=>(( 
opt(( 
.(( 
MapFrom(( &
(((& '
src((' *
=>((+ -
src((. 1
.((1 2
AllocatedFromDate((2 C
.((C D

ToDateTime((D N
(((N O
TimeOnly((O W
.((W X
MinValue((X `
)((` a
)((a b
)((b c
.)) 
	ForMember)) 
()) 
dest)) 
=>))  "
dest))# '
.))' (
AllocatedUptoDate))( 9
,))9 :
opt** 
=>** 
opt** 
.** 
MapFrom** &
(**& '
src**' *
=>**+ -
src**. 1
.**1 2
AllocatedUptoDate**2 C
.**C D

ToDateTime**D N
(**N O
TimeOnly**O W
.**W X
MaxValue**X `
)**` a
)**a b
)**b c
;**c d
},, 	
}-- 
}.. ì
DC:\ParkingLotAllocationSystem\BackendProject\DTO\VehicleUpdateDto.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 

class 
VehicleUpdateDto !
{ 
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
NumberPlate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Make 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Color 
{ 
get !
;! "
set# &
;& '
}( )
public		 
int		 
UserId		 
{		 
get		 
;		  
set		! $
;		$ %
}		& '
}

 
} ≈

BC:\ParkingLotAllocationSystem\BackendProject\DTO\VehicleReadDto.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 

class 
VehicleReadDto 
{ 
public 
int 
	VehicleId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
NumberPlate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Make 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
Color		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public

 
int

 
UserId

 
{

 
get

 
;

  
set

! $
;

$ %
}

& '
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ì
DC:\ParkingLotAllocationSystem\BackendProject\DTO\VehicleCreateDto.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 

class 
VehicleCreateDto !
{ 
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
NumberPlate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Make 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Color 
{ 
get !
;! "
set# &
;& '
}( )
public		 
int		 
UserId		 
{		 
get		 
;		  
set		! $
;		$ %
}		& '
}

 
} „
AC:\ParkingLotAllocationSystem\BackendProject\DTO\UserUpdateDto.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 

class 
UserUpdateDto 
{ 
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
MobileNumber "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
} 
}		 é
?C:\ParkingLotAllocationSystem\BackendProject\DTO\UserReadDto.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 

class 
UserReadDto 
{ 
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
MobileNumber "
{# $
get% (
;( )
set* -
;- .
}/ 0
public		 
string		 
Role		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
}

 
} ˚
?C:\ParkingLotAllocationSystem\BackendProject\DTO\RegisterDto.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 

class 
RegisterDto 
{ 
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
MobileNumber "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public		 
string		 
Password		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
}

 
} Õ
GC:\ParkingLotAllocationSystem\BackendProject\DTO\ParkingLotUpdateDto.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 
class 
ParkingLotUpdateDto  
{ 
public 

string 
	LotNumber 
{ 
get !
;! "
set# &
;& '
}( )
public 

string 
Location 
{ 
get  
;  !
set" %
;% &
}' (
} 
}		 à
EC:\ParkingLotAllocationSystem\BackendProject\DTO\ParkingLotReadDto.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 

class 
ParkingLotReadDto "
{ 
public 
int 
ParkingLotId 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
	LotNumber 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Location 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
bool 

IsOccupied 
{  
get! $
;$ %
set& )
;) *
}+ ,
}		 
}

 ”
GC:\ParkingLotAllocationSystem\BackendProject\DTO\ParkingLotCreateDto.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 

class 
ParkingLotCreateDto $
{ 
public 
string 
	LotNumber 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Location 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ì
NC:\ParkingLotAllocationSystem\BackendProject\DTO\ParkingAllocationUpdateDto.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 

class &
ParkingAllocationUpdateDto +
{ 
public 
int 
ParkingLotId 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
DateOnly		 
AllocatedFromDate		 )
{		* +
get		, /
;		/ 0
set		1 4
;		4 5
}		6 7
public 
DateOnly 
AllocatedUptoDate )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 
} à
LC:\ParkingLotAllocationSystem\BackendProject\DTO\ParkingAllocationReadDto.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 

class $
ParkingAllocationReadDto )
{ 
public 
int 
AllocationId 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
string		 
NumberPlate		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
public 
string 
	LotNumber 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LotLocation !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DateOnly 
AllocatedFromDate )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
DateOnly 
AllocatedUptoDate )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
int 
AllocatedDays  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} ≠
NC:\ParkingLotAllocationSystem\BackendProject\DTO\ParkingAllocationCreateDto.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 

class &
ParkingAllocationCreateDto +
{ 
public 
int 
	VehicleId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
ParkingLotId 
{  !
get" %
;% &
set' *
;* +
}, -
public

 
DateOnly

 
AllocatedFromDate

 )
{

* +
get

, /
;

/ 0
set

1 4
;

4 5
}

6 7
public 
DateOnly 
AllocatedUptoDate )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 
} π
<C:\ParkingLotAllocationSystem\BackendProject\DTO\LoginDto.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 

class 
LoginDto 
{ 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ì
EC:\ParkingLotAllocationSystem\BackendProject\DTO\DateOnlyConverter.cs
	namespace 	
BackendProject
 
. 
DTO 
{ 
public 

class 
DateOnlyConverter "
:# $
JsonConverter% 2
<2 3
DateTime3 ;
>; <
{		 
private

 
const

 
string

 
Format

 #
=

$ %
$str

& 2
;

2 3
public 
override 
DateTime  
Read! %
(% &
ref& )
Utf8JsonReader* 8
reader9 ?
,? @
TypeA E
typeToConvertF S
,S T!
JsonSerializerOptionsU j
optionsk r
)r s
{ 	
var 
dateStr 
= 
reader  
.  !
	GetString! *
(* +
)+ ,
;, -
if 
( 
DateTime 
. 
TryParseExact &
(& '
dateStr' .
,. /
Format0 6
,6 7
CultureInfo8 C
.C D
InvariantCultureD T
,T U
DateTimeStylesV d
.d e
Nonee i
,i j
outk n
varo r
dates w
)w x
)x y
{ 
return 
date 
; 
} 
throw 
new 
JsonException #
(# $
$"$ &
$str& N
{N O
FormatO U
}U V
"V W
)W X
;X Y
} 	
public 
override 
void 
Write "
(" #
Utf8JsonWriter# 1
writer2 8
,8 9
DateTime: B
valueC H
,H I!
JsonSerializerOptionsJ _
options` g
)g h
{ 	
writer 
. 
WriteStringValue #
(# $
value$ )
.) *
ToString* 2
(2 3
Format3 9
,9 :
CultureInfo; F
.F G
InvariantCultureG W
)W X
)X Y
;Y Z
} 	
} 
} ê
HC:\ParkingLotAllocationSystem\BackendProject\Data\AppDbContextFactory.cs
	namespace 	$
ParkingLotSystem_Backend
 "
." #
Data# '
{ 
	namespace		 $
ParkingLotSystem_Backend		 &
.		& '
Data		' +
{

 
public 
class 
AppDbContextFactory (
:) *'
IDesignTimeDbContextFactory+ F
<F G
AppDbContextG S
>S T
{ 	
public 
AppDbContext 
CreateDbContext  /
(/ 0
string0 6
[6 7
]7 8
args9 =
)= >
{ 
IConfigurationRoot "
configuration# 0
=1 2
new3 6 
ConfigurationBuilder7 K
(K L
)L M
. 
SetBasePath  
(  !
	Directory! *
.* +
GetCurrentDirectory+ >
(> ?
)? @
)@ A
. 
AddJsonFile  
(  !
$str! 3
)3 4
. 
Build 
( 
) 
; 
var 
builder 
= 
new !#
DbContextOptionsBuilder" 9
<9 :
AppDbContext: F
>F G
(G H
)H I
;I J
var 
connectionString $
=% &
configuration' 4
.4 5
GetConnectionString5 H
(H I
$strI \
)\ ]
;] ^
builder 
. 
UseSqlServer $
($ %
connectionString% 5
)5 6
;6 7
return 
new 
AppDbContext '
(' (
builder( /
./ 0
Options0 7
)7 8
;8 9
} 
} 	
} 
} ¢3
AC:\ParkingLotAllocationSystem\BackendProject\Data\AppDbContext.cs
	namespace 	
BackendProject
 
. 
Data 
{ 
public 

class 
AppDbContext 
: 
	DbContext (
{ 
public		 
AppDbContext		 
(		 
DbContextOptions		 ,
<		, -
AppDbContext		- 9
>		9 :
options		; B
)		B C
:

 	
base


 
(

 
options

 
)

 
{ 	
} 
public 
DbSet 
< 
User 
> 
Users  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
Vehicle 
> 
Vehicles &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DbSet 
< 

ParkingLot 
>  
ParkingLots! ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
DbSet 
< 
ParkingAllocation &
>& '
ParkingAllocations( :
{; <
get= @
;@ A
setB E
;E F
}G H
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
modelBuilder 
. 
Entity 
<  
User  $
>$ %
(% &
)& '
. 
HasIndex 
( 
u 
=> 
u  
.  !
Email! &
)& '
. 
IsUnique 
( 
) 
. 
HasDatabaseName 
( 
$str -
)- .
;. /
modelBuilder 
. 
Entity 
<  
User  $
>$ %
(% &
)& '
. 
HasIndex 
( 
u 
=> 
u  
.  !
MobileNumber! -
)- .
. 
IsUnique 
( 
) 
.   
HasDatabaseName    
(    !
$str  ! 2
)  2 3
;  3 4
modelBuilder## 
.## 
Entity## 
<##  
User##  $
>##$ %
(##% &
)##& '
.$$ 
HasOne$$ 
($$ 
u$$ 
=>$$ 
u$$ 
.$$ 
Vehicle$$ &
)$$& '
.%% 
WithOne%% 
(%% 
v%% 
=>%% 
v%% 
.%%  
User%%  $
)%%$ %
.&& 
HasForeignKey&& 
<&& 
Vehicle&& &
>&&& '
(&&' (
v&&( )
=>&&* ,
v&&- .
.&&. /
UserId&&/ 5
)&&5 6
.'' 
OnDelete'' 
('' 
DeleteBehavior'' (
.''( )
Cascade'') 0
)''0 1
;''1 2
modelBuilder** 
.** 
Entity** 
<**  
Vehicle**  '
>**' (
(**( )
)**) *
.++ 
HasIndex++ 
(++ 
v++ 
=>++ 
v++  
.++  !
NumberPlate++! ,
)++, -
.,, 
IsUnique,, 
(,, 
),, 
;,, 
modelBuilder// 
.// 
Entity// 
<//  
ParkingAllocation//  1
>//1 2
(//2 3
)//3 4
.00 
HasOne00 
(00 
a00 
=>00 
a00 
.00 
Vehicle00 &
)00& '
.11 
WithMany11 
(11 
v11 
=>11 
v11  
.11  !
Allocations11! ,
)11, -
.22 
HasForeignKey22 
(22 
a22  
=>22! #
a22$ %
.22% &
	VehicleId22& /
)22/ 0
.33 
OnDelete33 
(33 
DeleteBehavior33 (
.33( )
Cascade33) 0
)330 1
;331 2
modelBuilder66 
.66 
Entity66 
<66  
ParkingAllocation66  1
>661 2
(662 3
)663 4
.77 
HasOne77 
(77 
a77 
=>77 
a77 
.77 

ParkingLot77 )
)77) *
.88 
WithMany88 
(88 
p88 
=>88 
p88  
.88  !
Allocations88! ,
)88, -
.99 
HasForeignKey99 
(99 
a99  
=>99! #
a99$ %
.99% &
ParkingLotId99& 2
)992 3
.:: 
OnDelete:: 
(:: 
DeleteBehavior:: (
.::( )
Cascade::) 0
)::0 1
;::1 2
modelBuilder== 
.== 
Entity== 
<==  

ParkingLot==  *
>==* +
(==+ ,
)==, -
.>> 
HasIndex>> 
(>> 
p>> 
=>>> 
p>>  
.>>  !
	LotNumber>>! *
)>>* +
.?? 
IsUnique?? 
(?? 
)?? 
;?? 
modelBuilderAA 
.AA 
EntityAA 
<AA  
ParkingAllocationAA  1
>AA1 2
(AA2 3
entityAA3 9
=>AA: <
{BB 
entityCC 
.CC 
PropertyCC 
(CC  
eCC  !
=>CC" $
eCC% &
.CC& '
AllocatedFromDateCC' 8
)CC8 9
.DD 
HasColumnTypeDD $
(DD$ %
$strDD% +
)DD+ ,
;DD, -
entityFF 
.FF 
PropertyFF 
(FF  
eFF  !
=>FF" $
eFF% &
.FF& '
AllocatedUptoDateFF' 8
)FF8 9
.GG 
HasColumnTypeGG $
(GG$ %
$strGG% +
)GG+ ,
;GG, -
}HH 
)HH 
;HH 
}II 	
}JJ 
}KK Ωe
MC:\ParkingLotAllocationSystem\BackendProject\Controllers\VehicleController.cs
	namespace 	
BackendProject
 
. 
Controllers $
{ 
[ 
ApiController 
] 
[		 
Route		 

(		
 
$str		 
)		 
]		 
public

 

class

 
VehiclesController

 #
:

$ %
ControllerBase

& 4
{ 
private 
readonly 
IVehicleService (
_service) 1
;1 2
private 
readonly 
ILogger  
<  !
VehiclesController! 3
>3 4
_logger5 <
;< =
public 
VehiclesController !
(! "
IVehicleService" 1
service2 9
,9 :
ILogger; B
<B C
VehiclesControllerC U
>U V
loggerW ]
)] ^
{ 	
_service 
= 
service 
; 
_logger 
= 
logger 
; 
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str "
)" #
]# $
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetAll) /
(/ 0
)0 1
{ 	
try 
{ 
var 
vehicles 
= 
await $
_service% -
.- .
GetAllAsync. 9
(9 :
): ;
;; <
_logger 
. 
LogInformation &
(& '
$str' ?
)? @
;@ A
return 
Ok 
( 
vehicles "
)" #
;# $
} 
catch 
( 
	Exception 
ex 
)  
{   
_logger!! 
.!! 
LogError!!  
(!!  !
ex!!! #
,!!# $
$str!!% B
)!!B C
;!!C D
return"" 

StatusCode"" !
(""! "
$num""" %
,""% &
$str""' S
)""S T
;""T U
}## 
}$$ 	
[&& 	
	Authorize&&	 
(&& 
Roles&& 
=&& 
$str&& "
)&&" #
]&&# $
['' 	
HttpGet''	 
('' 
$str'' 
)'' 
]'' 
public(( 
async(( 
Task(( 
<(( 
IActionResult(( '
>((' (
GetById(() 0
(((0 1
int((1 4
id((5 7
)((7 8
{)) 	
try** 
{++ 
var,, 
vehicle,, 
=,, 
await,, #
_service,,$ ,
.,,, -
GetByIdAsync,,- 9
(,,9 :
id,,: <
),,< =
;,,= >
if-- 
(-- 
vehicle-- 
==-- 
null-- #
)--# $
{.. 
_logger// 
.// 

LogWarning// &
(//& '
$str//' O
,//O P
id//Q S
)//S T
;//T U
return00 
NotFound00 #
(00# $
)00$ %
;00% &
}11 
_logger22 
.22 
LogInformation22 &
(22& '
$str22' L
,22L M
id22N P
)22P Q
;22Q R
return33 
Ok33 
(33 
vehicle33 !
)33! "
;33" #
}55 
catch66 
(66 
	Exception66 
ex66 
)66  
{77 
_logger88 
.88 
LogError88  
(88  !
ex88! #
,88# $
$str88% J
,88J K
id88L N
)88N O
;88O P
return99 

StatusCode99 !
(99! "
$num99" %
,99% &
$str99' V
)99V W
;99W X
}:: 
};; 	
[== 	
	Authorize==	 
(== 
Roles== 
=== 
$str== '
)==' (
]==( )
[>> 	
HttpGet>>	 
(>> 
$str>> #
)>># $
]>>$ %
public?? 
async?? 
Task?? 
<?? 
IActionResult?? '
>??' (
GetByUserId??) 4
(??4 5
int??5 8
userId??9 ?
)??? @
{@@ 	
tryAA 
{BB 
varCC 
vehiclesCC 
=CC 
awaitCC $
_serviceCC% -
.CC- .
GetByUserIdAsyncCC. >
(CC> ?
userIdCC? E
)CCE F
;CCF G
returnDD 
OkDD 
(DD 
vehiclesDD "
)DD" #
;DD# $
}EE 
catchFF 
(FF 
	ExceptionFF 
exFF 
)FF  
{GG 
_loggerHH 
.HH 
LogErrorHH  
(HH  !
exHH! #
,HH# $
$strHH% S
,HHS T
userIdHHU [
)HH[ \
;HH\ ]
returnII 

StatusCodeII !
(II! "
$numII" %
,II% &
$strII' ^
)II^ _
;II_ `
}JJ 
}KK 	
[MM 	
	AuthorizeMM	 
(MM 
RolesMM 
=MM 
$strMM '
)MM' (
]MM( )
[NN 	
HttpGetNN	 
(NN 
$strNN 
)NN 
]NN 
publicOO 
asyncOO 
TaskOO 
<OO 
IActionResultOO '
>OO' (
SearchOO) /
(OO/ 0
stringOO0 6
nameOO7 ;
)OO; <
{PP 	
tryQQ 
{RR 
varSS 
vehiclesSS 
=SS 
awaitSS $
_serviceSS% -
.SS- .
SearchAsyncSS. 9
(SS9 :
nameSS: >
)SS> ?
;SS? @
returnTT 
OkTT 
(TT 
vehiclesTT "
)TT" #
;TT# $
}UU 
catchVV 
(VV 
	ExceptionVV 
exVV 
)VV  
{WW 
_loggerXX 
.XX 
LogErrorXX  
(XX  !
exXX! #
,XX# $
$strXX% R
,XXR S
nameXXT X
)XXX Y
;XXY Z
returnYY 

StatusCodeYY !
(YY! "
$numYY" %
,YY% &
$strYY' X
)YYX Y
;YYY Z
}ZZ 
}[[ 	
[]] 	
	Authorize]]	 
(]] 
Roles]] 
=]] 
$str]] '
)]]' (
]]]( )
[^^ 	
HttpGet^^	 
(^^ 
$str^^ "
)^^" #
]^^# $
public__ 
async__ 
Task__ 
<__ 
IActionResult__ '
>__' (
SearchByNumberPlate__) <
(__< =
[__= >
	FromQuery__> G
]__G H
string__I O
plate__P U
)__U V
{`` 	
tryaa 
{bb 
ifcc 
(cc 
stringcc 
.cc 
IsNullOrWhiteSpacecc -
(cc- .
platecc. 3
)cc3 4
)cc4 5
returndd 

BadRequestdd %
(dd% &
$strdd& F
)ddF G
;ddG H
varff 
resultff 
=ff 
awaitff "
_serviceff# +
.ff+ ,$
SearchByNumberPlateAsyncff, D
(ffD E
plateffE J
)ffJ K
;ffK L
returngg 
Okgg 
(gg 
resultgg  
)gg  !
;gg! "
}hh 
catchii 
(ii 
	Exceptionii 
exii 
)ii  
{jj 
_loggerkk 
.kk 
LogErrorkk  
(kk  !
exkk! #
,kk# $
$strkk% N
,kkN O
platekkP U
)kkU V
;kkV W
returnll 

StatusCodell !
(ll! "
$numll" %
,ll% &
$strll' [
)ll[ \
;ll\ ]
}mm 
}nn 	
[pp 	
	Authorizepp	 
(pp 
Rolespp 
=pp 
$strpp '
)pp' (
]pp( )
[qq 	
HttpPostqq	 
]qq 
publicrr 
asyncrr 
Taskrr 
<rr 
IActionResultrr '
>rr' (
Createrr) /
(rr/ 0
VehicleCreateDtorr0 @
dtorrA D
)rrD E
{ss 	
trytt 
{uu 
varvv 
vehiclevv 
=vv 
awaitvv #
_servicevv$ ,
.vv, -
CreateAsyncvv- 8
(vv8 9
dtovv9 <
)vv< =
;vv= >
returnww 
CreatedAtActionww &
(ww& '
nameofww' -
(ww- .
GetByIdww. 5
)ww5 6
,ww6 7
newww8 ;
{ww< =
idww> @
=wwA B
vehiclewwC J
.wwJ K
	VehicleIdwwK T
}wwU V
,wwV W
vehiclewwX _
)ww_ `
;ww` a
}xx 
catchyy 
(yy 
	Exceptionyy 
exyy 
)yy  
{zz 
_logger{{ 
.{{ 
LogError{{  
({{  !
ex{{! #
,{{# $
$str{{% R
,{{R S
dto{{T W
.{{W X
UserId{{X ^
){{^ _
;{{_ `
return|| 

StatusCode|| !
(||! "
$num||" %
,||% &
$str||' V
)||V W
;||W X
}}} 
}~~ 	
[
ÄÄ 	
	Authorize
ÄÄ	 
(
ÄÄ 
Roles
ÄÄ 
=
ÄÄ 
$str
ÄÄ '
)
ÄÄ' (
]
ÄÄ( )
[
ÅÅ 	
HttpPut
ÅÅ	 
(
ÅÅ 
$str
ÅÅ 
)
ÅÅ 
]
ÅÅ 
public
ÇÇ 
async
ÇÇ 
Task
ÇÇ 
<
ÇÇ 
IActionResult
ÇÇ '
>
ÇÇ' (
Update
ÇÇ) /
(
ÇÇ/ 0
int
ÇÇ0 3
id
ÇÇ4 6
,
ÇÇ6 7
VehicleUpdateDto
ÇÇ8 H
dto
ÇÇI L
)
ÇÇL M
{
ÉÉ 	
try
ÑÑ 
{
ÖÖ 
var
ÜÜ 
vehicle
ÜÜ 
=
ÜÜ 
await
ÜÜ #
_service
ÜÜ$ ,
.
ÜÜ, -
UpdateAsync
ÜÜ- 8
(
ÜÜ8 9
id
ÜÜ9 ;
,
ÜÜ; <
dto
ÜÜ= @
)
ÜÜ@ A
;
ÜÜA B
return
áá 
vehicle
áá 
==
áá !
null
áá" &
?
áá' (
NotFound
áá) 1
(
áá1 2
)
áá2 3
:
áá4 5
Ok
áá6 8
(
áá8 9
vehicle
áá9 @
)
áá@ A
;
ááA B
}
àà 
catch
ââ 
(
ââ 
	Exception
ââ 
ex
ââ 
)
ââ  
{
ää 
_logger
ãã 
.
ãã 
LogError
ãã  
(
ãã  !
ex
ãã! #
,
ãã# $
$str
ãã% J
,
ããJ K
id
ããL N
)
ããN O
;
ããO P
return
åå 

StatusCode
åå !
(
åå! "
$num
åå" %
,
åå% &
$str
åå' V
)
ååV W
;
ååW X
}
çç 
}
éé 	
[
êê 	
	Authorize
êê	 
(
êê 
Roles
êê 
=
êê 
$str
êê '
)
êê' (
]
êê( )
[
ëë 	

HttpDelete
ëë	 
(
ëë 
$str
ëë 
)
ëë 
]
ëë 
public
íí 
async
íí 
Task
íí 
<
íí 
IActionResult
íí '
>
íí' (
Delete
íí) /
(
íí/ 0
int
íí0 3
id
íí4 6
)
íí6 7
{
ìì 	
try
îî 
{
ïï 
var
ññ 
result
ññ 
=
ññ 
await
ññ "
_service
ññ# +
.
ññ+ ,
DeleteAsync
ññ, 7
(
ññ7 8
id
ññ8 :
)
ññ: ;
;
ññ; <
return
óó 
result
óó 
?
óó 
	NoContent
óó  )
(
óó) *
)
óó* +
:
óó, -
NotFound
óó. 6
(
óó6 7
)
óó7 8
;
óó8 9
}
òò 
catch
ôô 
(
ôô 
	Exception
ôô 
ex
ôô 
)
ôô  
{
öö 
_logger
õõ 
.
õõ 
LogError
õõ  
(
õõ  !
ex
õõ! #
,
õõ# $
$str
õõ% J
,
õõJ K
id
õõL N
)
õõN O
;
õõO P
return
úú 

StatusCode
úú !
(
úú! "
$num
úú" %
,
úú% &
$str
úú' V
)
úúV W
;
úúW X
}
ùù 
}
ûû 	
}
üü 
}†† èT
KC:\ParkingLotAllocationSystem\BackendProject\Controllers\UsersController.cs
	namespace		 	
BackendProject		
 
.		 
Controllers		 $
{

 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
UsersController  
:! "
ControllerBase# 1
{ 
private 
readonly 
IUserService %
_service& .
;. /
private 
readonly 
IJwtService $
_jwtService% 0
;0 1
private 
readonly 
ILogger  
<  !
UsersController! 0
>0 1
_logger2 9
;9 :
public 
UsersController 
( 
IUserService 
service  
,  !
IJwtService 

jwtService "
," #
ILogger 
< 
UsersController #
># $
logger% +
)+ ,
{ 	
_service 
= 
service 
; 
_jwtService 
= 

jwtService $
;$ %
_logger 
= 
logger 
; 
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str "
)" #
]# $
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetAll) /
(/ 0
)0 1
{   	
try!! 
{"" 
var## 
users## 
=## 
await## !
_service##" *
.##* +
GetAllAsync##+ 6
(##6 7
)##7 8
;##8 9
_logger$$ 
.$$ 
LogInformation$$ &
($$& '
$str$$' =
)$$= >
;$$> ?
return%% 
Ok%% 
(%% 
users%% 
)%%  
;%%  !
}&& 
catch'' 
('' 
	Exception'' 
ex'' 
)''  
{(( 
_logger)) 
.)) 
LogError))  
())  !
ex))! #
,))# $
$str))% F
)))F G
;))G H
return** 

StatusCode** !
(**! "
$num**" %
,**% &
$str**' >
)**> ?
;**? @
}++ 
},, 	
[-- 	
AllowAnonymous--	 
]-- 
[.. 	
HttpPost..	 
(.. 
$str.. 
).. 
].. 
public// 
async// 
Task// 
<// 
IActionResult// '
>//' (
Register//) 1
(//1 2
RegisterDto//2 =
dto//> A
)//A B
{00 	
try11 
{22 
var33 
user33 
=33 
await33  
_service33! )
.33) *
RegisterAsync33* 7
(337 8
dto338 ;
)33; <
;33< =
if55 
(55 
user55 
==55 
null55  
)55  !
return66 

StatusCode66 %
(66% &
$num66& )
,66) *
$str66+ B
)66B C
;66C D
if88 
(88 
user88 
.88 
FullName88 !
==88" $
$str88% 6
)886 7
return99 

BadRequest99 %
(99% &
new99& )
{99* +
message99, 3
=994 5
$str996 G
}99H I
)99I J
;99J K
if;; 
(;; 
user;; 
.;; 
FullName;; !
==;;" $
$str;;% 7
);;7 8
return<< 

BadRequest<< %
(<<% &
new<<& )
{<<* +
message<<, 3
=<<4 5
$str<<6 H
}<<I J
)<<J K
;<<K L
return>> 
Ok>> 
(>> 
user>> 
)>> 
;>>  
}?? 
catch@@ 
(@@ 
	Exception@@ 
ex@@ 
)@@  
{AA 
_loggerBB 
.BB 
LogErrorBB  
(BB  !
exBB! #
,BB# $
$strBB% L
,BBL M
dtoBBN Q
.BBQ R
EmailBBR W
)BBW X
;BBX Y
returnCC 

StatusCodeCC !
(CC! "
$numCC" %
,CC% &
$strCC' >
)CC> ?
;CC? @
}DD 
}EE 	
[HH 	
HttpPostHH	 
(HH 
$strHH 
)HH 
]HH 
publicII 
asyncII 
TaskII 
<II 
IActionResultII '
>II' (
LoginII) .
(II. /
LoginDtoII/ 7
dtoII8 ;
)II; <
{JJ 	
tryKK 
{LL 
varMM 
userMM 
=MM 
awaitMM  
_serviceMM! )
.MM) *

LoginAsyncMM* 4
(MM4 5
dtoMM5 8
)MM8 9
;MM9 :
ifNN 
(NN 
userNN 
==NN 
nullNN  
)NN  !
{OO 
_loggerPP 
.PP 

LogWarningPP &
(PP& '
$strPP' P
,PPP Q
dtoPPR U
.PPU V
EmailPPV [
)PP[ \
;PP\ ]
returnQQ 
UnauthorizedQQ '
(QQ' (
$strQQ( =
)QQ= >
;QQ> ?
}RR 
varTT 
dbUserTT 
=TT 
awaitTT "
_serviceTT# +
.TT+ ,
GetByIdAsyncTT, 8
(TT8 9
userTT9 =
.TT= >
UserIdTT> D
)TTD E
;TTE F
varUU 
tokenUU 
=UU 
_jwtServiceUU '
.UU' (
GenerateTokenUU( 5
(UU5 6
dbUserUU6 <
)UU< =
;UU= >
_loggerWW 
.WW 
LogInformationWW &
(WW& '
$strWW' L
,WWL M
dtoWWN Q
.WWQ R
EmailWWR W
)WWW X
;WWX Y
returnXX 
OkXX 
(XX 
newXX 
{XX 
userXX  $
,XX$ %
tokenXX& +
}XX, -
)XX- .
;XX. /
}YY 
catchZZ 
(ZZ 
	ExceptionZZ 
exZZ 
)ZZ  
{[[ 
_logger\\ 
.\\ 
LogError\\  
(\\  !
ex\\! #
,\\# $
$str\\% E
,\\E F
dto\\G J
.\\J K
Email\\K P
)\\P Q
;\\Q R
return]] 

StatusCode]] !
(]]! "
$num]]" %
,]]% &
$str]]' >
)]]> ?
;]]? @
}^^ 
}__ 	
[aa 	
	Authorizeaa	 
(aa 
Rolesaa 
=aa 
$straa "
)aa" #
]aa# $
[bb 	

HttpDeletebb	 
(bb 
$strbb 
)bb 
]bb 
publiccc 
asynccc 
Taskcc 
<cc 
IActionResultcc '
>cc' (
Deletecc) /
(cc/ 0
intcc0 3
idcc4 6
)cc6 7
{dd 	
tryee 
{ff 
vargg 
deletedgg 
=gg 
awaitgg #
_servicegg$ ,
.gg, -
DeleteAsyncgg- 8
(gg8 9
idgg9 ;
)gg; <
;gg< =
ifhh 
(hh 
!hh 
deletedhh 
)hh 
{ii 
_loggerjj 
.jj 

LogWarningjj &
(jj& '
$strjj' k
,jjk l
idjjm o
)jjo p
;jjp q
returnkk 
NotFoundkk #
(kk# $
)kk$ %
;kk% &
}ll 
_loggernn 
.nn 
LogInformationnn &
(nn& '
$strnn' S
,nnS T
idnnU W
)nnW X
;nnX Y
returnoo 
	NoContentoo  
(oo  !
)oo! "
;oo" #
}pp 
catchqq 
(qq 
	Exceptionqq 
exqq 
)qq  
{rr 
_loggerss 
.ss 
LogErrorss  
(ss  !
exss! #
,ss# $
$strss% K
,ssK L
idssM O
)ssO P
;ssP Q
returntt 

StatusCodett !
(tt! "
$numtt" %
,tt% &
$strtt' >
)tt> ?
;tt? @
}uu 
}vv 	
[xx 	
	Authorizexx	 
(xx 
Rolesxx 
=xx 
$strxx "
)xx" #
]xx# $
[yy 	
HttpPutyy	 
(yy 
$stryy 
)yy 
]yy 
publiczz 
asynczz 
Taskzz 
<zz 
IActionResultzz '
>zz' (
Updatezz) /
(zz/ 0
intzz0 3
idzz4 6
,zz6 7
UserUpdateDtozz8 E
dtozzF I
)zzI J
{{{ 	
try|| 
{}} 
var~~ 
user~~ 
=~~ 
await~~  
_service~~! )
.~~) *
UpdateAsync~~* 5
(~~5 6
id~~6 8
,~~8 9
dto~~: =
)~~= >
;~~> ?
if 
( 
user 
== 
null  
)  !
{
ÄÄ 
_logger
ÅÅ 
.
ÅÅ 

LogWarning
ÅÅ &
(
ÅÅ& '
$str
ÅÅ' ^
,
ÅÅ^ _
id
ÅÅ` b
)
ÅÅb c
;
ÅÅc d
return
ÇÇ 
NotFound
ÇÇ #
(
ÇÇ# $
$str
ÇÇ$ 4
)
ÇÇ4 5
;
ÇÇ5 6
}
ÉÉ 
_logger
ÖÖ 
.
ÖÖ 
LogInformation
ÖÖ &
(
ÖÖ& '
$str
ÖÖ' S
,
ÖÖS T
id
ÖÖU W
)
ÖÖW X
;
ÖÖX Y
return
ÜÜ 
Ok
ÜÜ 
(
ÜÜ 
user
ÜÜ 
)
ÜÜ 
;
ÜÜ  
}
áá 
catch
àà 
(
àà 
	Exception
àà 
ex
àà 
)
àà  
{
ââ 
_logger
ää 
.
ää 
LogError
ää  
(
ää  !
ex
ää! #
,
ää# $
$str
ää% K
,
ääK L
id
ääM O
)
ääO P
;
ääP Q
return
ãã 

StatusCode
ãã !
(
ãã! "
$num
ãã" %
,
ãã% &
$str
ãã' >
)
ãã> ?
;
ãã? @
}
åå 
}
çç 	
}
éé 
}èè ÜV
QC:\ParkingLotAllocationSystem\BackendProject\Controllers\ParkingLotsController.cs
	namespace 	
BackendProject
 
. 
Controllers $
{ 
[ 
ApiController 
] 
[		 
Route		 

(		
 
$str		 
)		 
]		 
public

 

class

 !
ParkingLotsController

 &
:

' (
ControllerBase

) 7
{ 
private 
readonly 
IParkingLotService +
_service, 4
;4 5
private 
readonly 
ILogger  
<  !!
ParkingLotsController! 6
>6 7
_logger8 ?
;? @
public !
ParkingLotsController $
($ %
IParkingLotService% 7
service8 ?
,? @
ILoggerA H
<H I!
ParkingLotsControllerI ^
>^ _
logger` f
)f g
{ 	
_service 
= 
service 
; 
_logger 
= 
logger 
; 
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str '
)' (
]( )
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetAll) /
(/ 0
)0 1
{ 	
try 
{ 
var 
lots 
= 
await  
_service! )
.) *
GetAllAsync* 5
(5 6
)6 7
;7 8
return 
Ok 
( 
lots 
) 
;  
} 
catch 
( 
	Exception 
ex 
)  
{ 
_logger   
.   
LogError    
(    !
ex  ! #
,  # $
$str  % U
)  U V
;  V W
return!! 

StatusCode!! !
(!!! "
$num!!" %
,!!% &
$str!!' ?
)!!? @
;!!@ A
}"" 
}## 	
[%% 	
	Authorize%%	 
(%% 
Roles%% 
=%% 
$str%% '
)%%' (
]%%( )
[&& 	
HttpGet&&	 
(&& 
$str&& 
)&& 
]&& 
public'' 
async'' 
Task'' 
<'' 
IActionResult'' '
>''' (
GetById'') 0
(''0 1
int''1 4
id''5 7
)''7 8
{(( 	
try)) 
{** 
var++ 
lot++ 
=++ 
await++ 
_service++  (
.++( )
GetByIdAsync++) 5
(++5 6
id++6 8
)++8 9
;++9 :
return,, 
lot,, 
==,, 
null,, "
?,,# $
NotFound,,% -
(,,- .
),,. /
:,,0 1
Ok,,2 4
(,,4 5
lot,,5 8
),,8 9
;,,9 :
}-- 
catch.. 
(.. 
	Exception.. 
ex.. 
)..  
{// 
_logger00 
.00 
LogError00  
(00  !
ex00! #
,00# $
$str00% Q
,00Q R
id00R T
)00T U
;00U V
return11 

StatusCode11 !
(11! "
$num11" %
,11% &
$str11' ?
)11? @
;11@ A
}22 
}33 	
[55 	
	Authorize55	 
(55 
Roles55 
=55 
$str55 "
)55" #
]55# $
[66 	
HttpPost66	 
]66 
public77 
async77 
Task77 
<77 
IActionResult77 '
>77' (
Create77) /
(77/ 0
ParkingLotCreateDto770 C
dto77D G
)77G H
{88 	
try99 
{:: 
var;; 
created;; 
=;; 
await;; #
_service;;$ ,
.;;, -
CreateAsync;;- 8
(;;8 9
dto;;9 <
);;< =
;;;= >
return<< 
CreatedAtAction<< &
(<<& '
nameof<<' -
(<<- .
GetById<<. 5
)<<5 6
,<<6 7
new<<8 ;
{<<< =
id<<> @
=<<A B
created<<C J
.<<J K
ParkingLotId<<K W
}<<X Y
,<<Y Z
created<<[ b
)<<b c
;<<c d
}== 
catch>> 
(>> 
	Exception>> 
ex>> 
)>>  
{?? 
_logger@@ 
.@@ 
LogError@@  
(@@  !
ex@@! #
,@@# $
$str@@% B
)@@B C
;@@C D
returnAA 

StatusCodeAA !
(AA! "
$numAA" %
,AA% &
$strAA' ?
)AA? @
;AA@ A
}BB 
}CC 	
[EE 	
	AuthorizeEE	 
(EE 
RolesEE 
=EE 
$strEE "
)EE" #
]EE# $
[FF 	
HttpPutFF	 
(FF 
$strFF 
)FF 
]FF 
publicGG 
asyncGG 
TaskGG 
<GG 
IActionResultGG '
>GG' (
UpdateGG) /
(GG/ 0
intGG0 3
idGG4 6
,GG6 7
ParkingLotUpdateDtoGG8 K
dtoGGL O
)GGO P
{HH 	
tryII 
{JJ 
varKK 
updatedKK 
=KK 
awaitKK #
_serviceKK$ ,
.KK, -
UpdateAsyncKK- 8
(KK8 9
idKK9 ;
,KK; <
dtoKK= @
)KK@ A
;KKA B
returnLL 
updatedLL 
==LL !
nullLL" &
?LL' (
NotFoundLL) 1
(LL1 2
)LL2 3
:LL4 5
OkLL6 8
(LL8 9
updatedLL9 @
)LL@ A
;LLA B
}MM 
catchNN 
(NN 
	ExceptionNN 
exNN 
)NN  
{OO 
_loggerPP 
.PP 
LogErrorPP  
(PP  !
exPP! #
,PP# $
$strPP% O
,PPO P
idPPP R
)PPR S
;PPS T
returnQQ 

StatusCodeQQ !
(QQ! "
$numQQ" %
,QQ% &
$strQQ' ?
)QQ? @
;QQ@ A
}RR 
}SS 	
[UU 	
	AuthorizeUU	 
(UU 
RolesUU 
=UU 
$strUU "
)UU" #
]UU# $
[VV 	

HttpDeleteVV	 
(VV 
$strVV 
)VV 
]VV 
publicWW 
asyncWW 
TaskWW 
<WW 
IActionResultWW '
>WW' (
DeleteWW) /
(WW/ 0
intWW0 3
idWW4 6
)WW6 7
{XX 	
tryYY 
{ZZ 
var[[ 
result[[ 
=[[ 
await[[ "
_service[[# +
.[[+ ,
DeleteAsync[[, 7
([[7 8
id[[8 :
)[[: ;
;[[; <
return\\ 
result\\ 
?\\ 
	NoContent\\  )
(\\) *
)\\* +
:\\, -
NotFound\\. 6
(\\6 7
)\\7 8
;\\8 9
}]] 
catch^^ 
(^^ 
	Exception^^ 
ex^^ 
)^^  
{__ 
_logger`` 
.`` 
LogError``  
(``  !
ex``! #
,``# $
$str``% O
,``O P
id``P R
)``R S
;``S T
returnaa 

StatusCodeaa !
(aa! "
$numaa" %
,aa% &
$straa' ?
)aa? @
;aa@ A
}bb 
}cc 	
[ee 	
	Authorizeee	 
(ee 
Rolesee 
=ee 
$stree "
)ee" #
]ee# $
[ff 	
HttpPostff	 
(ff 
$strff 
)ff 
]ff 
publicgg 
asyncgg 
Taskgg 
<gg 
IActionResultgg '
>gg' (
SeedLotsgg) 1
(gg1 2
)gg2 3
{hh 	
tryii 
{jj 
varkk 
messagekk 
=kk 
awaitkk #
_servicekk$ ,
.kk, -
SeedLotsAsynckk- :
(kk: ;
)kk; <
;kk< =
returnll 
Okll 
(ll 
messagell !
)ll! "
;ll" #
}mm 
catchnn 
(nn 
	Exceptionnn 
exnn 
)nn  
{oo 
_loggerpp 
.pp 
LogErrorpp  
(pp  !
expp! #
,pp# $
$strpp% B
)ppB C
;ppC D
returnqq 

StatusCodeqq !
(qq! "
$numqq" %
,qq% &
$strqq' ?
)qq? @
;qq@ A
}rr 
}ss 	
[uu 	
	Authorizeuu	 
(uu 
Rolesuu 
=uu 
$struu '
)uu' (
]uu( )
[vv 	
HttpGetvv	 
(vv 
$strvv 
)vv 
]vv 
publicww 
asyncww 
Taskww 
<ww 
IActionResultww '
>ww' (
Searchww) /
(ww/ 0
[ww0 1
	FromQueryww1 :
]ww: ;
DateTimeww< D
fromwwE I
,wwI J
[wwK L
	FromQuerywwL U
]wwU V
DateTimewwW _
toww` b
)wwb c
{xx 	
tryyy 
{zz 
if{{ 
({{ 
from{{ 
=={{ 
default{{ #
||{{$ &
to{{' )
=={{* ,
default{{- 4
||{{5 7
from{{8 <
>{{= >
to{{? A
){{A B
return|| 

BadRequest|| %
(||% &
$str||& ;
)||; <
;||< =
var~~ 
result~~ 
=~~ 
await~~ "
_service~~# +
.~~+ ,"
SearchByDateRangeAsync~~, B
(~~B C
from~~C G
,~~G H
to~~I K
)~~K L
;~~L M
return 
Ok 
( 
result  
)  !
;! "
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ 
	Exception
ÅÅ 
ex
ÅÅ 
)
ÅÅ  
{
ÇÇ 
_logger
ÉÉ 
.
ÉÉ 
LogError
ÉÉ  
(
ÉÉ  !
ex
ÉÉ! #
,
ÉÉ# $
$str
ÉÉ% W
,
ÉÉW X
from
ÉÉX \
,
ÉÉ\ ]
to
ÉÉ] _
)
ÉÉ_ `
;
ÉÉ` a
return
ÑÑ 

StatusCode
ÑÑ !
(
ÑÑ! "
$num
ÑÑ" %
,
ÑÑ% &
$str
ÑÑ' ?
)
ÑÑ? @
;
ÑÑ@ A
}
ÖÖ 
}
ÜÜ 	
}
àà 
}ââ ’H
XC:\ParkingLotAllocationSystem\BackendProject\Controllers\ParkingAllocationsController.cs
	namespace 	
BackendProject
 
. 
Controllers $
{ 
[ 
ApiController 
] 
[		 
Route		 

(		
 
$str		 
)		 
]		 
public

 

class

 (
ParkingAllocationsController

 -
:

. /
ControllerBase

0 >
{ 
private 
readonly %
IParkingAllocationService 2
_service3 ;
;; <
private 
readonly 
ILogger  
<  !(
ParkingAllocationsController! =
>= >
_logger? F
;F G
public (
ParkingAllocationsController +
(+ ,%
IParkingAllocationService, E
serviceF M
,M N
ILoggerO V
<V W(
ParkingAllocationsControllerW s
>s t
loggeru {
){ |
{ 	
_service 
= 
service 
; 
_logger 
= 
logger 
; 
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str "
)" #
]# $
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetAll) /
(/ 0
)0 1
{ 	
try 
{ 
return 
Ok 
( 
await 
_service  (
.( )
GetAllAsync) 4
(4 5
)5 6
)6 7
;7 8
} 
catch 
( 
	Exception 
ex 
)  
{ 
_logger 
. 
LogError  
(  !
ex! #
,# $
$str% E
)E F
;F G
return   

StatusCode   !
(  ! "
$num  " %
,  % &
$str  ' >
)  > ?
;  ? @
}!! 
}"" 	
[$$ 	
	Authorize$$	 
($$ 
Roles$$ 
=$$ 
$str$$ '
)$$' (
]$$( )
[%% 	
HttpGet%%	 
(%% 
$str%% 
)%% 
]%% 
public&& 
async&& 
Task&& 
<&& 
IActionResult&& '
>&&' (
GetById&&) 0
(&&0 1
int&&1 4
id&&5 7
)&&7 8
{'' 	
try(( 
{)) 
var** 
result** 
=** 
await** "
_service**# +
.**+ ,
GetByIdAsync**, 8
(**8 9
id**9 ;
)**; <
;**< =
return++ 
result++ 
==++  
null++! %
?++& '
NotFound++( 0
(++0 1
)++1 2
:++3 4
Ok++5 7
(++7 8
result++8 >
)++> ?
;++? @
},, 
catch-- 
(-- 
	Exception-- 
ex-- 
)--  
{.. 
_logger// 
.// 
LogError//  
(//  !
ex//! #
,//# $
$str//% L
,//L M
id//N P
)//P Q
;//Q R
return00 

StatusCode00 !
(00! "
$num00" %
,00% &
$str00' >
)00> ?
;00? @
}11 
}22 	
[44 	
	Authorize44	 
(44 
Roles44 
=44 
$str44 '
)44' (
]44( )
[55 	
HttpGet55	 
(55 
$str55 )
)55) *
]55* +
public66 
async66 
Task66 
<66 
IActionResult66 '
>66' (
GetByVehicleId66) 7
(667 8
int668 ;
	vehicleId66< E
)66E F
{77 	
try88 
{99 
return:: 
Ok:: 
(:: 
await:: 
_service::  (
.::( )
GetByVehicleIdAsync::) <
(::< =
	vehicleId::= F
)::F G
)::G H
;::H I
};; 
catch<< 
(<< 
	Exception<< 
ex<< 
)<<  
{== 
_logger>> 
.>> 
LogError>>  
(>>  !
ex>>! #
,>># $
$str>>% [
,>>[ \
	vehicleId>>\ e
)>>e f
;>>f g
return?? 

StatusCode?? !
(??! "
$num??" %
,??% &
$str??' >
)??> ?
;??? @
}@@ 
}AA 	
[BB 	
	AuthorizeBB	 
(BB 
RolesBB 
=BB 
$strBB '
)BB' (
]BB( )
[CC 	
HttpPostCC	 
]CC 
publicDD 
asyncDD 
TaskDD 
<DD 
IActionResultDD '
>DD' (
CreateDD) /
(DD/ 0&
ParkingAllocationCreateDtoDD0 J
dtoDDK N
)DDN O
{EE 	
tryFF 
{GG 
varHH 
resultHH 
=HH 
awaitHH "
_serviceHH# +
.HH+ ,
CreateAsyncHH, 7
(HH7 8
dtoHH8 ;
)HH; <
;HH< =
returnII 
resultII 
==II  
nullII! %
?JJ 
ConflictJJ 
(JJ 
$strJJ 4
)JJ4 5
:KK 
CreatedAtActionKK %
(KK% &
nameofKK& ,
(KK, -
GetByIdKK- 4
)KK4 5
,KK5 6
newKK7 :
{KK; <
idKK= ?
=KK@ A
resultKKB H
.KKH I
AllocationIdKKI U
}KKV W
,KKW X
resultKKY _
)KK_ `
;KK` a
}LL 
catchMM 
(MM 
	ExceptionMM 
exMM 
)MM  
{NN 
_loggerOO 
.OO 
LogErrorOO  
(OO  !
exOO! #
,OO# $
$strOO% H
)OOH I
;OOI J
returnPP 

StatusCodePP !
(PP! "
$numPP" %
,PP% &
$strPP' >
)PP> ?
;PP? @
}QQ 
}RR 	
[TT 	
	AuthorizeTT	 
(TT 
RolesTT 
=TT 
$strTT '
)TT' (
]TT( )
[UU 	
HttpPutUU	 
(UU 
$strUU 
)UU 
]UU 
publicVV 
asyncVV 
TaskVV 
<VV 
IActionResultVV '
>VV' (
UpdateVV) /
(VV/ 0
intVV0 3
idVV4 6
,VV6 7&
ParkingAllocationUpdateDtoVV8 R
dtoVVS V
)VVV W
{WW 	
tryXX 
{YY 
varZZ 
resultZZ 
=ZZ 
awaitZZ "
_serviceZZ# +
.ZZ+ ,
UpdateAsyncZZ, 7
(ZZ7 8
idZZ8 :
,ZZ: ;
dtoZZ< ?
)ZZ? @
;ZZ@ A
return[[ 
result[[ 
==[[  
null[[! %
?\\ 
Conflict\\ 
(\\ 
$str\\ 6
)\\6 7
:]] 
Ok]] 
(]] 
result]] 
)]]  
;]]  !
}^^ 
catch__ 
(__ 
	Exception__ 
ex__ 
)__  
{`` 
_loggeraa 
.aa 
LogErroraa  
(aa  !
exaa! #
,aa# $
$straa% I
,aaI J
idaaJ L
)aaL M
;aaM N
returnbb 

StatusCodebb !
(bb! "
$numbb" %
,bb% &
$strbb' >
)bb> ?
;bb? @
}cc 
}dd 	
[ff 	
	Authorizeff	 
(ff 
Rolesff 
=ff 
$strff "
)ff" #
]ff# $
[gg 	

HttpDeletegg	 
(gg 
$strgg 
)gg 
]gg 
publichh 
asynchh 
Taskhh 
<hh 
IActionResulthh '
>hh' (
Deletehh) /
(hh/ 0
inthh0 3
idhh4 6
)hh6 7
{ii 	
tryjj 
{kk 
varll 
deletedll 
=ll 
awaitll #
_servicell$ ,
.ll, -
DeleteAsyncll- 8
(ll8 9
idll9 ;
)ll; <
;ll< =
returnmm 
deletedmm 
?mm  
	NoContentmm! *
(mm* +
)mm+ ,
:mm- .
NotFoundmm/ 7
(mm7 8
)mm8 9
;mm9 :
}nn 
catchoo 
(oo 
	Exceptionoo 
exoo 
)oo  
{pp 
_loggerqq 
.qq 
LogErrorqq  
(qq  !
exqq! #
,qq# $
$strqq% I
,qqI J
idqqJ L
)qqL M
;qqM N
returnrr 

StatusCoderr !
(rr! "
$numrr" %
,rr% &
$strrr' >
)rr> ?
;rr? @
}ss 
}tt 	
}uu 
}vv 